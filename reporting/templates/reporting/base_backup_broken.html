{% load static %}<!-- reporting/templates/reporting/base.html -->

<!DOCTYPE html>{% load static %}

<html lang="ko"><!DOCTYPE html>

<head><html lang="ko">  <head>

  <meta charset="UTF-8">    <meta charset="UTF-8" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <meta name="csrf-token" content="{{ csrf_token }}">    <meta name="csrf-token" content="{{ csrf_token }}" />

  <title>{% block title %}ì˜ì—… ë³´ê³  ì‹œìŠ¤í…œ{% endblock %}</title>    

      <title>{% block title %}ì˜ì—… ë³´ê³  ì‹œìŠ¤í…œ{% endblock %}</title>

  <!-- Google Fonts - Inter -->    

  <link rel="preconnect" href="https://fonts.googleapis.com">    <!-- Google Fonts - Inter (Modern Professional Font) -->

  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>    <link rel="preconnect" href="https://fonts.googleapis.com">

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

      <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

  <!-- Font Awesome -->    

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">    <!-- Animate.css for smooth animations -->

      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>

  <!-- Bootstrap CSS -->    

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">    <link href="{% static 'css/dist/styles.css' %}" rel="stylesheet" />

      <!-- Font Awesome for icons -->

  <!-- Animate.css -->    <link

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">      rel="stylesheet"

        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"

  <!-- Chart.js -->    />

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>    <!-- Bootstrap CSS (if not already included) -->

      <link

  <style>      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"

    * {      rel="stylesheet"

      margin: 0;    />

      padding: 0;    <!-- Chart.js for data visualization -->

      box-sizing: border-box;    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    }    <style>

      /* ============================================

    :root {         ğŸ¨ MODERN PREMIUM UI/UX DESIGN SYSTEM

      --sidebar-width: 260px;         ============================================ */

      --primary: #007bff;      

      --primary-dark: #0056b3;      :root {

      --gray-50: #f8f9fa;        /* Primary Colors */

      --gray-100: #e9ecef;        --primary-50: #f0f9ff;

      --gray-200: #dee2e6;        --primary-100: #e0f2fe;

      --gray-300: #ced4da;        --primary-500: #0ea5e9;

      --gray-700: #495057;        --primary-600: #0284c7;

      --gray-800: #343a40;        --primary-700: #0369a1;

      --gray-900: #212529;        

    }        /* Neutral Colors */

        --gray-50: #f8fafc;

    body {        --gray-100: #f1f5f9;

      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;        --gray-200: #e2e8f0;

      display: flex;        --gray-300: #cbd5e1;

      min-height: 100vh;        --gray-400: #94a3b8;

      background: #f8f9fa;        --gray-500: #64748b;

    }        --gray-600: #475569;

        --gray-700: #334155;

    /* ========== ì‚¬ì´ë“œë°” ========== */        --gray-800: #1e293b;

    .main-nav {        --gray-900: #0f172a;

      width: var(--sidebar-width);        

      background: linear-gradient(180deg, #1e3a8a 0%, #1e40af 100%);        /* Spacing */

      color: white;        --spacing-xs: 0.25rem;

      position: fixed;        --spacing-sm: 0.5rem;

      left: 0;        --spacing-md: 1rem;

      top: 0;        --spacing-lg: 1.5rem;

      height: 100vh;        --spacing-xl: 2rem;

      overflow-y: auto;        --spacing-2xl: 3rem;

      z-index: 1000;        

      box-shadow: 2px 0 8px rgba(0,0,0,0.1);        /* Border Radius */

    }        --radius-sm: 0.375rem;

        --radius-md: 0.5rem;

    .main-nav .logo {        --radius-lg: 0.75rem;

      display: block;        --radius-xl: 1rem;

      padding: 1.5rem;        

      font-size: 1.5rem;        /* Shadows */

      font-weight: 800;        --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);

      color: white;        --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);

      text-decoration: none;        --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);

      text-align: center;        --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);

      border-bottom: 1px solid rgba(255,255,255,0.1);        

    }        /* Typography */

        --font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;

    .main-nav ul {      }

      list-style: none;      

      padding: 1rem 0;      * {

    }        margin: 0;

        padding: 0;

    .main-nav ul li {        box-sizing: border-box;

      margin: 0;      }

    }      

      body {

    .main-nav ul li a {        font-family: var(--font-family);

      display: flex;        margin: 0;

      align-items: center;        background: linear-gradient(to bottom right, #f8fafc, #f1f5f9);

      padding: 0.875rem 1.5rem;        color: var(--gray-800);

      color: rgba(255,255,255,0.8);        display: flex;

      text-decoration: none;        min-height: 100vh;

      transition: all 0.3s;        position: relative;

      font-weight: 500;        font-size: 15px;

    }        line-height: 1.6;

        -webkit-font-smoothing: antialiased;

    .main-nav ul li a:hover {        -moz-osx-font-smoothing: grayscale;

      background: rgba(255,255,255,0.1);      }

      color: white;      

      padding-left: 2rem;      /* ============================================

    }         ğŸ“± MOBILE OVERLAY

         ============================================ */

    .main-nav ul li a.active {      .mobile-overlay {

      background: rgba(255,255,255,0.15);        display: none;

      color: white;        position: fixed;

      border-left: 4px solid #60a5fa;        top: 0;

    }        left: 0;

        width: 100%;

    .main-nav ul li a i {        height: 100%;

      margin-right: 0.75rem;        background: rgba(15, 23, 42, 0.5);

      width: 20px;        backdrop-filter: blur(4px);

      text-align: center;        z-index: 1049;

    }        transition: opacity 0.3s ease;

      }

    /* ========== ë©”ì¸ ì»¨í…ì¸  ========== */

    .main-content {      .mobile-overlay.show {

      margin-left: var(--sidebar-width);        display: block;

      flex: 1;        animation: fadeIn 0.3s ease;

      padding: 2rem;      }

      width: calc(100% - var(--sidebar-width));      

    }      @keyframes fadeIn {

        from { opacity: 0; }

    /* ========== ìƒë‹¨ í—¤ë” ========== */        to { opacity: 1; }

    .top-header-bar {      }

      background: white;

      padding: 1rem 1.5rem;      /* ============================================

      margin: -2rem -2rem 2rem -2rem;         ğŸ” MOBILE HAMBURGER MENU

      border-bottom: 1px solid var(--gray-200);         ============================================ */

      box-shadow: 0 1px 3px rgba(0,0,0,0.05);      .mobile-menu-toggle {

    }        display: none;

        position: fixed;

    .top-header-bar .page-title h5 {        top: var(--spacing-lg);

      font-weight: 700;        left: var(--spacing-lg);

      color: var(--gray-900);        z-index: 1051;

      margin: 0;        background: white;

    }        border: 1px solid var(--gray-200);

        border-radius: var(--radius-lg);

    .user-info-compact {        padding: var(--spacing-md);

      font-size: 0.9rem;        cursor: pointer;

      color: var(--gray-700);        box-shadow: var(--shadow-lg);

    }        min-width: 48px;

        min-height: 48px;

    .logout-btn-top {        display: flex;

      padding: 0.5rem 1rem;        align-items: center;

      background: var(--primary);        justify-content: center;

      color: white;        transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);

      border: none;      }

      border-radius: 0.5rem;

      cursor: pointer;      .mobile-menu-toggle:hover {

      font-weight: 600;        background: var(--gray-50);

      transition: all 0.3s;        transform: translateY(-2px);

    }        box-shadow: var(--shadow-xl);

      }

    .logout-btn-top:hover {

      background: var(--primary-dark);      .mobile-menu-toggle:active {

      transform: translateY(-2px);        transform: scale(0.95);

    }      }



    /* ========== ëª¨ë°”ì¼ ë°˜ì‘í˜• ========== */      .mobile-menu-toggle i {

    .mobile-menu-toggle {        font-size: 20px;

      display: none;        color: var(--gray-700);

    }        transition: transform 0.3s ease;

      }

    .mobile-overlay {      }

      display: none;

    }        /* ë©”ë‰´ ì—´ë¦´ ë•Œ ì•„ì´ì½˜ íšŒì „ */

      .mobile-menu-toggle.active i {

    @media (max-width: 768px) {        transform: rotate(90deg);

      .main-nav {      }

        transform: translateX(-100%);

        transition: transform 0.3s;      /* í„°ì¹˜ ì¸í„°í˜ì´ìŠ¤ ìµœì í™” */

      }      @media (pointer: coarse) {

        /* í„°ì¹˜ ë””ë°”ì´ìŠ¤ìš© ìµœì í™” */

      .main-nav.show {        .btn {

        transform: translateX(0);          min-height: 44px;

      }          min-width: 44px;

          padding: 12px 16px;

      .main-content {          touch-action: manipulation;

        margin-left: 0;        }

        width: 100%;        

      }        .form-control, .form-select {

          min-height: 44px;

      .mobile-menu-toggle {          font-size: 16px; /* iOS ì¤Œ ë°©ì§€ */

        display: flex;          padding: 12px 16px;

        position: fixed;        }

        top: 1rem;        

        left: 1rem;        .dropdown-item {

        z-index: 1001;          min-height: 44px;

        background: white;          padding: 12px 16px;

        border: 1px solid var(--gray-200);          display: flex;

        border-radius: 0.5rem;          align-items: center;

        padding: 0.75rem;        }

        cursor: pointer;        

        box-shadow: 0 2px 8px rgba(0,0,0,0.1);        .nav-link {

        align-items: center;          min-height: 44px;

        justify-content: center;          padding: 12px 16px;

      }          display: flex;

          align-items: center;

      .mobile-menu-toggle i {        }

        font-size: 1.25rem;        

        color: var(--gray-700);        /* í„°ì¹˜ í”¼ë“œë°± */

      }        .btn:active,

        .dropdown-item:active,

      .mobile-overlay {        .nav-link:active {

        display: none;          transform: scale(0.98);

        position: fixed;          transition: transform 0.1s ease;

        top: 0;        }

        left: 0;        

        width: 100%;        /* ìŠ¤í¬ë¡¤ë°” ìˆ¨ê¸°ê¸° (í„°ì¹˜ ìŠ¤í¬ë¡¤ ì‹œ) */

        height: 100%;        .table-responsive {

        background: rgba(0,0,0,0.5);          scrollbar-width: none;

        z-index: 999;          -ms-overflow-style: none;

      }        }

        

      .mobile-overlay.show {        .table-responsive::-webkit-scrollbar {

        display: block;          display: none;

      }        }

    }      }



    /* í˜ì´ì§€ë³„ ì¶”ê°€ ìŠ¤íƒ€ì¼ */      /* Pull-to-refresh ìŠ¤íƒ€ì¼ */

    {% block extra_css %}{% endblock %}      .pull-to-refresh {

  </style>        position: fixed;

</head>        top: -50px;

<body>        left: 50%;

        transform: translateX(-50%);

  <!-- ëª¨ë°”ì¼ í–„ë²„ê±° ë©”ë‰´ -->        background: #007bff;

  <button class="mobile-menu-toggle" id="mobileMenuToggle">        color: white;

    <i class="fas fa-bars"></i>        padding: 10px 20px;

  </button>        border-radius: 20px;

        z-index: 9999;

  <!-- ëª¨ë°”ì¼ ì˜¤ë²„ë ˆì´ -->        transition: all 0.3s ease;

  <div class="mobile-overlay" id="mobileOverlay"></div>        opacity: 0;

      }

  <!-- ì‚¬ì´ë“œë°” ë„¤ë¹„ê²Œì´ì…˜ -->      

  <nav class="main-nav" id="mainNav">      .pull-to-refresh.show {

    <!-- ë¡œê³  -->        top: 20px;

    {% if user.is_authenticated %}        opacity: 1;

    <a href="{% url 'reporting:dashboard' %}" class="logo">Sales System</a>      }

    {% else %}

    <a href="{% url 'reporting:login' %}" class="logo">Sales System</a>      /* ìŠ¤ì™€ì´í”„ í‘œì‹œê¸° */

    {% endif %}      .swipe-indicator {

        position: absolute;

    <ul>        top: 50%;

      <!-- ëŒ€ì‹œë³´ë“œ -->        transform: translateY(-50%);

      {% if user.is_authenticated %}        background: rgba(0, 123, 255, 0.8);

      <li>        color: white;

        <a href="{% url 'reporting:dashboard' %}" class="{% if request.resolver_match.url_name == 'dashboard' %}active{% endif %}">        padding: 8px 12px;

          <i class="fas fa-home"></i>ëŒ€ì‹œë³´ë“œ        border-radius: 16px;

        </a>        font-size: 12px;

      </li>        z-index: 1000;

      {% endif %}        pointer-events: none;

        opacity: 0;

      <!-- Admin ì „ìš© -->        transition: opacity 0.3s ease;

      {% if user.is_authenticated and user.userprofile.role == 'admin' %}      }

      <li>      

        <a href="{% url 'reporting:user_list' %}" class="{% if request.resolver_match.url_name|slice:':4' == 'user' %}active{% endif %}">      .swipe-indicator.left {

          <i class="fas fa-users"></i>ì‚¬ìš©ì ê´€ë¦¬        left: 20px;

        </a>      }

      </li>      

      {% endif %}      .swipe-indicator.right {

        right: 20px;

      <!-- Manager ì „ìš© -->      }

      {% if user.is_authenticated and user.userprofile.role == 'manager' %}      

      <li>      .swipe-indicator.show {

        <a href="{% url 'reporting:manager_user_list' %}" class="{% if request.resolver_match.url_name|slice:':12' == 'manager_user' %}active{% endif %}">        opacity: 1;

          <i class="fas fa-user-friends"></i>ì§ì› ê´€ë¦¬      }

        </a>      

      </li>      /* ============================================

      {% endif %}         ğŸ¯ MODERN SIDEBAR NAVIGATION

         ============================================ */

      <!-- Admin & Salesman ì—…ì²´ ê´€ë¦¬ -->      .main-nav {

      {% if user.is_authenticated and user.userprofile.role == 'admin' or user.is_authenticated and user.userprofile.role == 'salesman' %}        background: white;

      <li>        border-right: 1px solid var(--gray-200);

        <a href="{% url 'reporting:company_list' %}" class="{% if request.resolver_match.url_name|slice:':7' == 'company' %}active{% endif %}">        padding: var(--spacing-xl) 0;

          <i class="fas fa-building"></i>ì—…ì²´ ê´€ë¦¬        width: 280px;

        </a>        display: flex;

      </li>        flex-direction: column;

      {% endif %}        position: relative;

        z-index: 1050;

      <!-- Manager ì „ìš© ë¦¬í¬íŠ¸ -->        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);

      {% if user.is_authenticated and user.userprofile.role == 'manager' %}        box-shadow: var(--shadow-sm);

      <li>      }

        <a href="{% url 'reporting:customer_report' %}" class="{% if request.resolver_match.url_name == 'customer_report' %}active{% endif %}">

          <i class="fas fa-chart-bar"></i>ê³ ê° ë¦¬í¬íŠ¸      .main-nav .logo {

        </a>        font-size: 24px;

      </li>        font-weight: 700;

      <li>        background: linear-gradient(135deg, var(--primary-600), var(--primary-500));

        <a href="{% url 'reporting:manager_company_list' %}" class="{% if request.resolver_match.url_name|slice:':15' == 'manager_company' %}active{% endif %}">        -webkit-background-clip: text;

          <i class="fas fa-building"></i>ì—…ì²´ ì¡°íšŒ        -webkit-text-fill-color: transparent;

        </a>        background-clip: text;

      </li>        text-decoration: none;

      {% endif %}        margin: 0 var(--spacing-xl) var(--spacing-2xl);

        display: flex;

      <!-- Salesman & Admin ê³µí†µ -->        align-items: center;

      {% if user.is_authenticated and user.userprofile.role != 'manager' %}        gap: var(--spacing-md);

      <li>        padding: var(--spacing-md);

        <a href="{% url 'reporting:followup_list' %}" class="{% if request.resolver_match.url_name|slice:':8' == 'followup' %}active{% endif %}">        border-radius: var(--radius-lg);

          <i class="fas fa-user-check"></i>íŒ”ë¡œìš°ì—…        transition: all 0.2s ease;

        </a>      }

      </li>      

      <li>      .main-nav .logo:hover {

        <a href="{% url 'reporting:schedule_list' %}" class="{% if request.resolver_match.url_name == 'schedule_list' %}active{% endif %}">        background: var(--gray-50);

          <i class="fas fa-list"></i>ì¼ì • ëª©ë¡        -webkit-text-fill-color: var(--primary-600);

        </a>      }

      </li>      

      <li>      .main-nav .logo i {

        <a href="{% url 'reporting:schedule_calendar' %}" class="{% if request.resolver_match.url_name == 'schedule_calendar' %}active{% endif %}">        font-size: 28px;

          <i class="fas fa-calendar"></i>ì¼ì • ìº˜ë¦°ë”        background: linear-gradient(135deg, var(--primary-600), var(--primary-500));

        </a>        -webkit-background-clip: text;

      </li>        -webkit-text-fill-color: transparent;

      <li>        background-clip: text;

        <a href="{% url 'reporting:history_list' %}" class="{% if request.resolver_match.url_name|slice:':7' == 'history' %}active{% endif %}">      }

          <i class="fas fa-history"></i>íˆìŠ¤í† ë¦¬

        </a>      .main-nav ul {

      </li>        list-style: none;

      <li>        padding: 0 var(--spacing-md);

        <a href="{% url 'reporting:customer_report' %}" class="{% if request.resolver_match.url_name|slice:':8' == 'customer' %}active{% endif %}">        margin: 0;

          <i class="fas fa-chart-bar"></i>ê³ ê° ë¦¬í¬íŠ¸        flex-grow: 1;

        </a>      }

      </li>      

      {% endif %}      .main-nav ul li {

        margin-bottom: var(--spacing-xs);

      <!-- í”„ë¡œí•„ ê´€ë¦¬ -->      }

      {% if user.is_authenticated %}

      <li>      .main-nav ul li a {

        <a href="{% url 'reporting:profile' %}" class="{% if request.resolver_match.url_name == 'profile' %}active{% endif %}">        display: flex;

          <i class="fas fa-user-cog"></i>í”„ë¡œí•„ ê´€ë¦¬        align-items: center;

        </a>        gap: var(--spacing-md);

      </li>        padding: var(--spacing-md) var(--spacing-lg);

      {% endif %}        color: var(--gray-600);

    </ul>        text-decoration: none;

  </nav>        border-radius: var(--radius-md);

        font-weight: 500;

  <!-- ë©”ì¸ ì»¨í…ì¸  ì˜ì—­ -->        font-size: 14px;

  <main class="main-content">        transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);

    <!-- ìƒë‹¨ í—¤ë” ë°” -->        position: relative;

    <div class="top-header-bar">        overflow: hidden;

      <div class="d-flex justify-content-between align-items-center">      }

        <div class="page-title">      

          <h5>{% block page_title %}ì˜ì—… ë³´ê³  ì‹œìŠ¤í…œ{% endblock %}</h5>      .main-nav ul li a i {

        </div>        font-size: 18px;

        <div class="user-actions-top d-flex align-items-center gap-3">        min-width: 20px;

          {% if user.is_authenticated %}        transition: transform 0.2s ease;

          <span class="user-info-compact">      }

            <i class="fas fa-user me-1"></i>{{ user.username }}      

            {% if user.userprofile %}      .main-nav ul li a::before {

            <small class="text-muted ms-1">({{ user.userprofile.get_role_display }})</small>        content: '';

            {% endif %}        position: absolute;

          </span>        left: 0;

          <form method="post" action="{% url 'reporting:logout' %}" style="margin: 0;">        top: 50%;

            {% csrf_token %}        transform: translateY(-50%);

            <button type="submit" class="logout-btn-top">        height: 0;

              <i class="fas fa-sign-out-alt me-1"></i>ë¡œê·¸ì•„ì›ƒ        width: 3px;

            </button>        background: linear-gradient(to bottom, var(--primary-600), var(--primary-500));

          </form>        border-radius: 0 2px 2px 0;

          {% else %}        transition: height 0.2s ease;

          <a href="{% url 'reporting:login' %}" class="btn btn-primary">      }

            <i class="fas fa-sign-in-alt me-1"></i>ë¡œê·¸ì¸

          </a>      .main-nav ul li a:hover {

          {% endif %}        background: var(--primary-50);

        </div>        color: var(--primary-700);

      </div>        transform: translateX(4px);

    </div>      }

      

    <!-- ë©”ì‹œì§€ í‘œì‹œ -->      .main-nav ul li a:hover i {

    {% if messages %}        transform: scale(1.1);

    <div class="messages mb-4">      }

      {% for message in messages %}      

      <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">      .main-nav ul li a:hover::before {

        {{ message }}        height: 70%;

        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>      }

      </div>

      {% endfor %}      .main-nav ul li a.active {

    </div>        background: linear-gradient(135deg, var(--primary-500), var(--primary-600));

    {% endif %}        color: white;

        box-shadow: var(--shadow-md);

    <!-- í˜ì´ì§€ ì»¨í…ì¸  -->      }

    {% block content %}{% endblock %}      

  </main>      .main-nav ul li a.active::before {

        display: none;

  <!-- Bootstrap JS -->      }

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

      .main-nav .user-actions {

  <!-- ëª¨ë°”ì¼ ë©”ë‰´ ìŠ¤í¬ë¦½íŠ¸ -->        margin-top: auto;

  <script>        padding: var(--spacing-md);

    const mobileMenuToggle = document.getElementById('mobileMenuToggle');        border-top: 1px solid var(--gray-200);

    const mainNav = document.getElementById('mainNav');      }

    const mobileOverlay = document.getElementById('mobileOverlay');

      .main-nav .user-actions a {

    if (mobileMenuToggle) {        display: flex;

      mobileMenuToggle.addEventListener('click', function() {        align-items: center;

        mainNav.classList.toggle('show');        justify-content: center;

        mobileOverlay.classList.toggle('show');        gap: var(--spacing-sm);

      });        padding: var(--spacing-md);

    }        color: var(--gray-700);

        text-decoration: none;

    if (mobileOverlay) {        border-radius: var(--radius-md);

      mobileOverlay.addEventListener('click', function() {        transition: all 0.2s ease;

        mainNav.classList.remove('show');        text-align: center;

        mobileOverlay.classList.remove('show');        border: 1px solid var(--gray-200);

      });        margin-top: var(--spacing-sm);

    }        font-weight: 500;

        font-size: 14px;

    // ë§í¬ í´ë¦­ ì‹œ ëª¨ë°”ì¼ ë©”ë‰´ ë‹«ê¸°      }

    document.querySelectorAll('.main-nav a').forEach(link => {

      link.addEventListener('click', function() {      .main-nav .user-actions a:hover {

        if (window.innerWidth <= 768) {        background: var(--gray-50);

          mainNav.classList.remove('show');        border-color: var(--gray-300);

          mobileOverlay.classList.remove('show');        transform: translateY(-1px);

        }        box-shadow: var(--shadow-sm);

      });      }

    });      

  </script>      /* ============================================

         ğŸ“„ MAIN CONTENT AREA

  {% block extra_js %}{% endblock %}         ============================================ */

</body>      .main-content {

</html>        flex-grow: 1;

        padding: 0;
        overflow-y: auto;
        background: linear-gradient(to bottom right, var(--gray-50), white);
      }
      
      /* ============================================
         ğŸ¯ TOP HEADER BAR
         ============================================ */
      .top-header-bar {
        background: white;
        border-bottom: 1px solid var(--gray-200);
        padding: var(--spacing-lg) var(--spacing-2xl);
        position: sticky;
        top: 0;
        z-index: 1000;
        box-shadow: var(--shadow-sm);
        backdrop-filter: blur(10px);
        background: rgba(255, 255, 255, 0.95);
      }
      
      .page-title h5 {
        color: var(--gray-900);
        font-weight: 700;
        margin: 0;
        font-size: 20px;
        letter-spacing: -0.02em;
      }
      
      .user-actions-top {
        display: flex;
        align-items: center;
        gap: var(--spacing-md);
      }
      
      .user-info-compact {
        color: var(--gray-700);
        font-size: 14px;
        font-weight: 500;
        padding: var(--spacing-sm) var(--spacing-md);
        background: var(--gray-100);
        border-radius: var(--radius-md);
      }
      
      /* ============================================
         ğŸ¨ MODERN BUTTONS
         ============================================ */
      .logout-btn-top,
      .login-btn-top {
        padding: var(--spacing-sm) var(--spacing-lg);
        color: white;
        border: none;
        border-radius: var(--radius-md);
        font-size: 14px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        display: flex;
        align-items: center;
        gap: var(--spacing-sm);
        box-shadow: var(--shadow-sm);
      }
      
      .logout-btn-top {
        background: linear-gradient(135deg, #ef4444, #dc2626);
      }
      
      .logout-btn-top:hover {
        background: linear-gradient(135deg, #dc2626, #b91c1c);
        transform: translateY(-2px);
        box-shadow: var(--shadow-lg);
      }
      
      .logout-btn-top:active {
        transform: translateY(0);
        box-shadow: var(--shadow-sm);
      }
      
      .login-btn-top {
        background: linear-gradient(135deg, var(--primary-500), var(--primary-600));
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        text-decoration: none;
      }
      
      .login-btn-top:hover {
        background: linear-gradient(135deg, #0056b3, #004494);
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(0, 123, 255, 0.3);
        color: white;
        text-decoration: none;
      }
      
      .login-btn-top:active {
        transform: translateY(0);
        box-shadow: 0 2px 6px rgba(0, 123, 255, 0.3);
      }
      
      /* ëª¨ë°”ì¼ ë°˜ì‘í˜• - ìƒë‹¨ í—¤ë” */
      @media (max-width: 768px) {
        .top-header-bar {
          padding: 10px 15px;
        }
        
        .page-title h5 {
          font-size: 16px;
        }
        
        .user-info-compact {
          font-size: 12px;
        }
        
        .logout-btn-top {
          padding: 6px 12px;
          font-size: 12px;
        }
        
        .login-btn-top {
          padding: 6px 12px;
          font-size: 12px;
        }
        
        .container {
          padding: 20px 15px;
        }
      }
      
      /* í€µ ë„¤ë¹„ê²Œì´ì…˜ ë°” ìŠ¤íƒ€ì¼ */
      .quick-nav-bar {
        background-color: #f8f9fa;
        border-radius: 8px;
        padding: 15px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        margin-bottom: 20px;
      }

      .quick-nav-bar .btn {
        border-radius: 6px;
        font-weight: 500;
        transition: all 0.2s ease;
        text-decoration: none;
        white-space: nowrap;
      }

      .quick-nav-bar .btn:hover {
        transform: translateY(-1px);
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
      }

      .quick-nav-bar .btn i {
        font-size: 14px;
      }

      @media (max-width: 768px) {
        .quick-nav-bar {
          padding: 10px;
          margin: 0 -15px 20px;
          border-radius: 0;
        }
        
        .quick-nav-bar .d-flex {
          overflow-x: auto;
          scrollbar-width: none;
          -ms-overflow-style: none;
          padding-bottom: 5px;
        }
        
        .quick-nav-bar .d-flex::-webkit-scrollbar {
          display: none;
        }
        
        .quick-nav-bar .btn {
          flex-shrink: 0;
          font-size: 12px;
          padding: 6px 10px;
        }
        
        .quick-nav-bar .btn i {
          font-size: 12px;
        }
      }

      .container {
        max-width: 900px; /* Notion í˜ì´ì§€ ë„ˆë¹„ì™€ ìœ ì‚¬í•˜ê²Œ */
        margin: 0 auto; /* ì¤‘ì•™ ì •ë ¬ */
        padding: 30px; /* ì»¨í…ì¸  ì˜ì—­ íŒ¨ë”© */
      }

      .page-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding-bottom: 15px;
        margin-bottom: 25px;
        border-bottom: 1px solid #edecec; /* Notion êµ¬ë¶„ì„ ê³¼ ìœ ì‚¬í•˜ê²Œ */
      }

      .page-title {
        font-size: 28px; /* Notion í˜ì´ì§€ ì œëª© í¬ê¸°ì™€ ìœ ì‚¬í•˜ê²Œ */
        font-weight: 700; /* Notion ì œëª© êµµê¸° */
        color: #1f1e1c; /* Notion ì œëª© ìƒ‰ìƒ */
      }

      .btn {
        display: inline-block;
        padding: 9px 16px; /* ë²„íŠ¼ íŒ¨ë”© ì¡°ì • */
        font-size: 14px;
        font-weight: 500;
        text-align: center;
        text-decoration: none;
        border-radius: 5px; /* Notion ë²„íŠ¼ ë‘¥ê¸€ê¸° */
        cursor: pointer;
        transition: background-color 0.2s, border-color 0.2s;
        border: 1px solid transparent; /* ê¸°ë³¸ í…Œë‘ë¦¬ íˆ¬ëª… */
      }

      .btn-primary {
        background-color: #2563eb; /* Notion ì£¼ìš” ë²„íŠ¼ ìƒ‰ìƒ */
        color: white;
        border-color: #2563eb;
      }

      .btn-primary:hover {
        background-color: #1d4ed8;
        border-color: #1d4ed8;
      }

      .btn-secondary {
        background-color: #ffffff;
        color: #37352f;
        border: 1px solid #e3e2e0; /* Notion ë³´ì¡° ë²„íŠ¼ í…Œë‘ë¦¬ */
      }

      .btn-secondary:hover {
        background-color: #f7f7f5; /* Notion ë³´ì¡° ë²„íŠ¼ í˜¸ë²„ ìƒ‰ìƒ */
      }

      .card-list {
        display: grid;
        grid-template-columns: repeat(
          auto-fill,
          minmax(280px, 1fr)
        ); /* ì¹´ë“œ ìµœì†Œ ë„ˆë¹„ ì¡°ì • */
        gap: 25px; /* ì¹´ë“œ ê°„ê²© ì¡°ì • */
      }

      .card {
        background-color: #ffffff;
        border: 1px solid #edecec; /* Notion ì¹´ë“œ í…Œë‘ë¦¬ */
        border-radius: 6px; /* Notion ì¹´ë“œ ë‘¥ê¸€ê¸° */
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.07), 0 1px 2px rgba(0, 0, 0, 0.03); /* Notion ì¹´ë“œ ê·¸ë¦¼ì */
        transition: box-shadow 0.2s;
      }
      .card:hover {
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.05); /* í˜¸ë²„ ì‹œ ê·¸ë¦¼ì ê°•ì¡° */
      }

      .card-body {
        padding: 20px; /* ì¹´ë“œ ë‚´ë¶€ íŒ¨ë”© ì¡°ì • */
      }

      .card-title {
        font-size: 17px; /* ì¹´ë“œ ì œëª© í¬ê¸° ì¡°ì • */
        font-weight: 600;
        margin-top: 0;
        margin-bottom: 8px; /* ì œëª©ê³¼ ë¶€ì œëª© ì‚¬ì´ ê°„ê²© ì¡°ì • */
      }

      .card-title a {
        color: #37352f; /* ì¹´ë“œ ì œëª© ë§í¬ ìƒ‰ìƒ */
        text-decoration: none;
      }

      .card-title a:hover {
        text-decoration: underline;
      }      .card-subtitle {
        font-size: 13px; /* ì¹´ë“œ ë¶€ì œëª© í¬ê¸° ì¡°ì • */
        font-weight: 400;
        color: #787774; /* ì¹´ë“œ ë¶€ì œëª© ìƒ‰ìƒ */
        margin-bottom: 12px;
      }

      /* ëŒ€ì‹œë³´ë“œ í†µê³„ ì¹´ë“œ ìŠ¤íƒ€ì¼ */
      .stat-card {
        border: 1px solid #e3e2e0;
        border-radius: 8px;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
        transition: all 0.2s ease-in-out;
        min-height: 140px;
      }

      .stat-card:hover {
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        transform: translateY(-1px);
      }

      .stat-card .card-body {
        padding: 16px;
      }

      .stat-card .icon-wrapper {
        width: 40px;
        height: 40px;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-left: 8px;
      }

      /* ì‘ì€ í™”ë©´ì—ì„œì˜ ë°˜ì‘í˜• ì¡°ì • */
      @media (max-width: 768px) {
        .stat-card .card-body {
          padding: 12px;
        }

        .stat-card h3 {
          font-size: 1.2rem;
        }

        .stat-card .btn-sm {
          font-size: 0.75rem;
          padding: 4px 8px;
        }

        .stat-card .icon-wrapper {
          width: 32px;
          height: 32px;
        }
      }

      /* ë§¤ìš° ì‘ì€ í™”ë©´ì—ì„œì˜ ì¡°ì • */
      @media (max-width: 576px) {
        .stat-card {
          min-height: 120px;
        }

        .stat-card .card-body {
          padding: 10px;
        }

        .stat-card h3 {
          font-size: 1.1rem;
        }

        .stat-card .card-title {
          font-size: 0.8rem;
        }
      }
      }

      .card-text {
        font-size: 14px;
        line-height: 1.6;
        color: #5c5a53; /* ì¹´ë“œ ë³¸ë¬¸ í…ìŠ¤íŠ¸ ìƒ‰ìƒ */
      }
      .card-text strong {
        color: #37352f; /* ê°•ì¡° í…ìŠ¤íŠ¸ ìƒ‰ìƒ */
      }

      .text-muted {
        color: #9b9a97;
      }

      .text-center {
        text-align: center;
      }

      .mt-3 {
        margin-top: 1rem;
      }
      .mb-2 {
        margin-bottom: 0.5rem;      }
      /* ì¶”ê°€ì ì¸ Notion ìŠ¤íƒ€ì¼ ìš”ì†Œë“¤ (ì•„ì´ì½˜, í…Œì´ë¸”, í¼ ë“±)ì€ í•„ìš”ì— ë”°ë¼ í™•ì¥í•©ë‹ˆë‹¤. */

      /* ê¸€ë¡œë²Œ ë¡œë”© ìŠ¤í”¼ë„ˆ ìŠ¤íƒ€ì¼ */
      .global-loader {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(255, 255, 255, 0.9);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        backdrop-filter: blur(2px);
      }

      .loader-content {
        text-align: center;
        color: #37352f;
      }

      .spinner {
        width: 40px;
        height: 40px;
        border: 4px solid #e3e2e0;
        border-top: 4px solid #2563eb;
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin: 0 auto 15px;
      }

      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }

      /* í† ìŠ¤íŠ¸ ë©”ì‹œì§€ ìŠ¤íƒ€ì¼ */
      .toast-container {
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 9998;
        max-width: 400px;
      }

      .toast {
        background-color: #ffffff;
        border: 1px solid #e3e2e0;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        margin-bottom: 10px;
        padding: 15px 20px;
        position: relative;
        display: flex;
        align-items: center;
        opacity: 0;
        transform: translateX(100%);
        transition: all 0.3s ease;
      }

      .toast.show {
        opacity: 1;
        transform: translateX(0);
      }

      .toast.toast-success {
        border-left: 4px solid #198754;
      }

      .toast.toast-error {
        border-left: 4px solid #dc3545;
      }

      .toast.toast-warning {
        border-left: 4px solid #ffc107;
      }

      .toast.toast-info {
        border-left: 4px solid #0dcaf0;
      }

      .toast-icon {
        margin-right: 12px;
        font-size: 18px;
      }

      .toast-success .toast-icon {
        color: #198754;
      }

      .toast-error .toast-icon {
        color: #dc3545;
      }

      .toast-warning .toast-icon {
        color: #ffc107;
      }

      .toast-info .toast-icon {
        color: #0dcaf0;
      }

      .toast-message {
        flex-grow: 1;
        font-size: 14px;
        line-height: 1.4;
      }

      .toast-close {
        background: none;
        border: none;
        font-size: 18px;
        color: #787774;
        cursor: pointer;
        margin-left: 10px;
        padding: 0;
        width: 20px;
        height: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .toast-close:hover {
        color: #37352f;
      }      /* ëª¨ë°”ì¼ ë°˜ì‘í˜• ìµœì í™” - ê°•ì œ ì ìš© */
      @media (max-width: 768px) {
        /* ëª¨ë°”ì¼ CSS ì ìš© í™•ì¸ìš© - bodyì— ë°°ê²½ìƒ‰ ë³€ê²½ */
        body {
          flex-direction: column !important;
          padding-top: 60px !important;
          background-color: #f8f9fa !important; /* ëª¨ë°”ì¼ì—ì„œë§Œ íšŒìƒ‰ ë°°ê²½ */
        }

        /* ëª¨ë°”ì¼ í–„ë²„ê±° ë©”ë‰´ í‘œì‹œ */
        .mobile-menu-toggle {
          display: block !important;
        }        .main-nav {
          position: fixed;
          top: 0;
          left: -300px;
          width: 280px;
          height: 100vh;
          padding: 80px 20px 20px;
          border-right: none;
          border-bottom: none;
          box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
          z-index: 1050;
          transition: left 0.3s ease;
          overflow-y: auto;
          display: flex;
          flex-direction: column;
        }

        .main-nav.show {
          left: 0;
        }        .main-nav ul {
          display: block;
          flex-wrap: none;
          gap: 0;
          margin-bottom: 20px;
          flex-grow: 1;
          overflow-y: auto;
        }

        .main-nav ul li {
          flex: none;
          min-width: auto;
          margin-bottom: 5px;
        }

        .main-nav ul li a {
          text-align: left;
          font-size: 16px;
          padding: 15px;
          min-height: 44px; /* í„°ì¹˜ ì¹œí™”ì  */
          display: flex;
          align-items: center;
        }

        .main-nav ul li a i {
          margin-right: 12px;
          width: 20px;
          text-align: center;
        }

        /* ëª¨ë°”ì¼ ì˜¤ë²„ë ˆì´ í‘œì‹œ */
        .mobile-overlay.show {
          display: block;
        }

        .main-content {
          width: 100%;
          padding: 15px;
        }

        .container {
          max-width: 100%;
          padding: 0 10px;
        }

        .page-header {
          flex-direction: column;
          align-items: flex-start;
          gap: 15px;
          margin-bottom: 20px;
        }

        .page-title {
          font-size: 24px;
        }

        /* ë²„íŠ¼ ëª¨ë°”ì¼ ìµœì í™” */
        .btn {
          padding: 12px 16px;
          font-size: 16px;
          min-height: 44px;
          display: inline-flex;
          align-items: center;
          justify-content: center;
        }

        /* ì¹´ë“œ ëª¨ë°”ì¼ ìµœì í™” */
        .card {
          margin-bottom: 15px;
          border-radius: 8px;
        }

        .card-body {
          padding: 15px;
        }

        /* í…Œì´ë¸” ëª¨ë°”ì¼ ìµœì í™” */
        .table th,
        .table td {
          padding: 12px 8px;
          font-size: 14px;
          white-space: nowrap;
        }

        /* í¼ ëª¨ë°”ì¼ ìµœì í™” */
        .form-control,
        .form-select {
          min-height: 44px;
          font-size: 16px; /* iOS ì¤Œ ë°©ì§€ */
          border-radius: 8px;
        }

        /* ë“œë¡­ë‹¤ìš´ ëª¨ë°”ì¼ ìµœì í™” */
        .dropdown-menu {
          border-radius: 8px;
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
          margin-top: 8px;
        }

        .dropdown-item {
          padding: 12px 16px;
          font-size: 16px;
          min-height: 44px;
          display: flex;
          align-items: center;
        }        /* ëª¨ë‹¬ ëª¨ë°”ì¼ ìµœì í™” */
        .modal-dialog {
          margin: 20px;
          max-width: calc(100% - 40px);
        }

        .modal-content {
          border-radius: 12px;
        }        /* ëª¨ë°”ì¼ ìŠ¬ë¼ì´ë” ìŠ¤íƒ€ì¼ - ê°•ì œ ì ìš© */
        .mobile-slider {
          display: flex !important;
          overflow-x: auto !important;
          scroll-snap-type: x mandatory !important;
          gap: 15px !important;
          padding: 0 15px !important;
          margin: 0 -15px !important;
          scrollbar-width: none !important; /* Firefox */
          -ms-overflow-style: none !important; /* IE and Edge */
          background-color: #e3f2fd !important; /* ë””ë²„ê¹…ìš© - ìŠ¬ë¼ì´ë” ë°°ê²½ */
        }

        .mobile-slider::-webkit-scrollbar {
          display: none !important; /* Chrome, Safari */
        }

        .mobile-slider .card,
        .mobile-slider .stat-card {
          flex: 0 0 85% !important;
          scroll-snap-align: center !important;
          margin-bottom: 0 !important;
        }

        /* ëª¨ë°”ì¼ ê·¸ë˜í”„ ì»¨í…Œì´ë„ˆ - ê°•ì œ ì ìš© */
        .mobile-chart-slider {
          display: flex !important;
          overflow-x: auto !important;
          scroll-snap-type: x mandatory !important;
          gap: 20px !important;
          padding: 0 15px !important;
          margin: 0 -15px !important;
          scrollbar-width: none !important;
          -ms-overflow-style: none !important;
          background-color: #fff3e0 !important; /* ë””ë²„ê¹…ìš© - ì°¨íŠ¸ ìŠ¬ë¼ì´ë” ë°°ê²½ */
        }        .mobile-chart-slider::-webkit-scrollbar {
          display: none !important;
        }

        /* ëª¨ë°”ì¼ ì „ìš© í‘œì‹œ/ìˆ¨ê¹€ ê°•ì œ ì ìš© */
        .d-md-none {
          display: block !important;
        }

        .d-none.d-md-flex {
          display: none !important;
        }

        @media (min-width: 769px) {
          .d-md-none {
            display: none !important;
          }
          
          .d-none.d-md-flex {
            display: flex !important;
          }
        }

        .mobile-chart-slider .chart-container {
          flex: 0 0 90%;
          scroll-snap-align: center;
          min-height: 300px;
        }

        /* ëª¨ë°”ì¼ í•„í„° ë°•ìŠ¤ ìµœì í™” */
        .filter-box {
          padding: 10px;
          margin-bottom: 15px;
        }

        .filter-box .btn-group {
          display: flex;
          flex-wrap: wrap;
          gap: 5px;
        }

        .filter-box .btn {
          padding: 6px 10px;
          font-size: 12px;
          min-height: 32px;
          flex: 1;
          min-width: auto;
        }

        /* ëª¨ë°”ì¼ ì•¡ì…˜ ë²„íŠ¼ ìµœì í™” */
        .action-buttons {
          display: flex;
          flex-wrap: wrap;
          gap: 8px;
          margin-top: 10px;
        }

        .action-buttons .btn {
          padding: 8px 12px;
          font-size: 13px;
          min-height: 36px;
          flex: 1;
          min-width: auto;
        }

        /* ëª¨ë°”ì¼ í…Œì´ë¸” ìŠ¤í¬ë¡¤ */
        .table-responsive {
          border-radius: 8px;
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        /* ëª¨ë°”ì¼ ìº˜ë¦°ë” ìµœì í™” */
        .fc {
          font-size: 12px;
        }

        .fc-toolbar {
          flex-direction: column;
          gap: 10px;
        }

        .fc-toolbar-chunk {
          display: flex;
          justify-content: center;
          flex-wrap: wrap;
          gap: 5px;
        }

        .fc-button {
          padding: 6px 10px;
          font-size: 12px;
          min-height: 32px;
        }

        .fc-daygrid-day {
          min-height: 40px;
        }

        .fc-daygrid-day-number {
          font-size: 12px;
          padding: 4px;
        }

        .fc-event {
          font-size: 10px;
          padding: 1px 3px;
        }

        /* ëª¨ë°”ì¼ íˆìŠ¤í† ë¦¬ ì¹´ë“œ */
        .history-card {
          padding: 12px;
          margin-bottom: 10px;
        }

        .history-card .card-title {
          font-size: 14px;
          margin-bottom: 8px;
        }

        .history-card .card-text {
          font-size: 12px;
          line-height: 1.4;
        }

        /* ëª¨ë°”ì¼ ìƒì„¸ ì •ë³´ */
        .detail-info {
          padding: 10px;
          font-size: 14px;
        }

        .detail-info dt {
          font-size: 13px;
          font-weight: 600;
          margin-bottom: 4px;
        }

        .detail-info dd {
          font-size: 12px;
          margin-bottom: 8px;
        }
        }

        /* í†µê³„ ì¹´ë“œ ëª¨ë°”ì¼ ìµœì í™” */
        .row.mb-4 .col-lg-3,
        .row.mb-4 .col-md-6 {
          margin-bottom: 15px;
        }

        .card-hover {
          transition: transform 0.2s ease;
        }

        .card-hover:active {
          transform: scale(0.98);
        }

        /* ë„¤ë¹„ê²Œì´ì…˜ ì‚¬ìš©ì ì•¡ì…˜ */
        .main-nav .user-actions a {
          padding: 15px;
          font-size: 16px;
          min-height: 44px;
          display: flex;
          align-items: center;
          justify-content: center;
        }

        /* ì°¨íŠ¸ ëª¨ë°”ì¼ ìµœì í™” */
        .chart-container {
          position: relative;
          height: 250px;
          margin-bottom: 20px;
        }

        /* ìº˜ë¦°ë” ëª¨ë°”ì¼ ìµœì í™” */
        .calendar-container {
          overflow-x: auto;
          -webkit-overflow-scrolling: touch;
        }

        /* í…ìŠ¤íŠ¸ í¬ê¸° ì¡°ì • */
        h1, .h1 { font-size: 24px; }
        h2, .h2 { font-size: 20px; }
        h3, .h3 { font-size: 18px; }
        h4, .h4 { font-size: 16px; }

        /* ìŠ¤í˜ì´ì‹± ì¡°ì • */
        .mb-4 { margin-bottom: 20px !important; }
        .mb-3 { margin-bottom: 15px !important; }
      }

        .page-title {
          font-size: 24px;
        }

        .card-list {
          grid-template-columns: 1fr;
          gap: 15px;
        }

        .toast-container {
          top: 10px;
          right: 10px;
          left: 10px;
          max-width: none;
        }

        .toast {
          margin-bottom: 8px;
        }
      }

      /* íƒœë¸”ë¦¿ ë°˜ì‘í˜• */
      @media (max-width: 1024px) and (min-width: 769px) {
        .card-list {
          grid-template-columns: repeat(2, 1fr);
        }
      }
      
      /* ============================================
         ğŸ¨ PREMIUM UI COMPONENTS - PHASE 2
         ============================================ */
      
      /* ğŸ“Š í†µê³„ ì¹´ë“œ ê°œì„  */
      .stat-card {
        background: white;
        border: 1px solid var(--gray-200);
        border-radius: var(--radius-xl);
        box-shadow: var(--shadow-md);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        overflow: hidden;
        position: relative;
      }
      
      .stat-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(90deg, var(--primary-500), var(--primary-600));
        opacity: 0;
        transition: opacity 0.3s ease;
      }

      .stat-card:hover {
        box-shadow: var(--shadow-xl);
        transform: translateY(-4px);
        border-color: var(--primary-200);
      }
      
      .stat-card:hover::before {
        opacity: 1;
      }

      .stat-card .card-body {
        padding: var(--spacing-xl);
      }

      .stat-card .icon-wrapper {
        width: 56px;
        height: 56px;
        border-radius: var(--radius-lg);
        display: flex;
        align-items: center;
        justify-content: center;
        background: linear-gradient(135deg, var(--primary-50), var(--primary-100));
        margin-bottom: var(--spacing-md);
      }
      
      .stat-card .icon-wrapper i {
        font-size: 24px;
        background: linear-gradient(135deg, var(--primary-600), var(--primary-500));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      /* ğŸ“ í¼ ìš”ì†Œ ê°œì„  */
      .form-control,
      .form-select,
      textarea.form-control {
        border: 2px solid var(--gray-200);
        border-radius: var(--radius-md);
        padding: var(--spacing-md) var(--spacing-lg);
        font-size: 15px;
        font-family: var(--font-family);
        transition: all 0.2s ease;
        background: white;
      }

      .form-control:focus,
      .form-select:focus,
      textarea.form-control:focus {
        border-color: var(--primary-500);
        box-shadow: 0 0 0 4px var(--primary-50);
        outline: none;
      }

      .form-label {
        font-weight: 600;
        color: var(--gray-700);
        margin-bottom: var(--spacing-sm);
        font-size: 14px;
        display: inline-block;
      }

      .form-group {
        margin-bottom: var(--spacing-lg);
      }

      /* ğŸ¯ ë²„íŠ¼ ì „ì²´ ê°œì„  */
      .btn {
        padding: var(--spacing-md) var(--spacing-xl);
        font-size: 14px;
        font-weight: 600;
        font-family: var(--font-family);
        border-radius: var(--radius-md);
        border: none;
        cursor: pointer;
        transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: var(--spacing-sm);
        text-decoration: none;
        box-shadow: var(--shadow-sm);
      }

      .btn:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-md);
      }

      .btn:active {
        transform: translateY(0);
        box-shadow: var(--shadow-sm);
      }

      .btn-primary {
        background: linear-gradient(135deg, var(--primary-500), var(--primary-600));
        color: white;
      }

      .btn-primary:hover {
        background: linear-gradient(135deg, var(--primary-600), var(--primary-700));
        color: white;
      }

      .btn-success {
        background: linear-gradient(135deg, #10b981, #059669);
        color: white;
      }

      .btn-success:hover {
        background: linear-gradient(135deg, #059669, #047857);
        color: white;
      }

      .btn-danger {
        background: linear-gradient(135deg, #ef4444, #dc2626);
        color: white;
      }

      .btn-danger:hover {
        background: linear-gradient(135deg, #dc2626, #b91c1c);
        color: white;
      }

      .btn-secondary {
        background: white;
        color: var(--gray-700);
        border: 2px solid var(--gray-200);
      }

      .btn-secondary:hover {
        background: var(--gray-50);
        border-color: var(--gray-300);
        color: var(--gray-900);
      }

      .btn-sm {
        padding: var(--spacing-sm) var(--spacing-md);
        font-size: 13px;
      }

      .btn-lg {
        padding: var(--spacing-lg) var(--spacing-2xl);
        font-size: 16px;
      }

      /* ğŸ“‹ í…Œì´ë¸” ê°œì„  */
      .table {
        border-collapse: separate;
        border-spacing: 0;
        width: 100%;
        background: white;
        border-radius: var(--radius-lg);
        overflow: hidden;
        box-shadow: var(--shadow-sm);
      }

      .table thead th {
        background: linear-gradient(135deg, var(--gray-50), white);
        color: var(--gray-900);
        font-weight: 700;
        font-size: 13px;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        padding: var(--spacing-lg);
        border-bottom: 2px solid var(--gray-200);
      }

      .table tbody tr {
        transition: all 0.2s ease;
        border-bottom: 1px solid var(--gray-100);
      }

      .table tbody tr:hover {
        background: var(--primary-50);
        transform: scale(1.01);
        box-shadow: var(--shadow-md);
      }

      .table tbody td {
        padding: var(--spacing-lg);
        color: var(--gray-700);
        font-size: 14px;
      }

      .table-striped tbody tr:nth-of-type(odd) {
        background: var(--gray-50);
      }

      /* ğŸ­ ëª¨ë‹¬ ê°œì„  */
      .modal-content {
        border: none;
        border-radius: var(--radius-xl);
        box-shadow: var(--shadow-xl);
        overflow: hidden;
      }

      .modal-header {
        background: linear-gradient(135deg, var(--gray-50), white);
        border-bottom: 1px solid var(--gray-200);
        padding: var(--spacing-xl) var(--spacing-2xl);
      }

      .modal-title {
        font-weight: 700;
        color: var(--gray-900);
        font-size: 20px;
        display: flex;
        align-items: center;
        gap: var(--spacing-md);
      }

      .modal-body {
        padding: var(--spacing-2xl);
      }

      .modal-footer {
        background: var(--gray-50);
        border-top: 1px solid var(--gray-200);
        padding: var(--spacing-lg) var(--spacing-2xl);
        gap: var(--spacing-md);
      }

      .btn-close {
        background: transparent;
        border: none;
        font-size: 24px;
        opacity: 0.5;
        transition: opacity 0.2s ease;
      }

      .btn-close:hover {
        opacity: 1;
      }

      /* ğŸ¨ ë°°ì§€ ê°œì„  */
      .badge {
        padding: var(--spacing-xs) var(--spacing-md);
        border-radius: var(--radius-md);
        font-weight: 600;
        font-size: 12px;
        display: inline-flex;
        align-items: center;
        gap: var(--spacing-xs);
      }

      .badge-primary {
        background: var(--primary-100);
        color: var(--primary-700);
      }

      .badge-success {
        background: #dcfce7;
        color: #166534;
      }

      .badge-danger {
        background: #fee2e2;
        color: #991b1b;
      }

      .badge-warning {
        background: #fef3c7;
        color: #92400e;
      }

      .badge-info {
        background: #dbeafe;
        color: #1e40af;
      }

      /* ğŸ“Š ì°¨íŠ¸ ì»¨í…Œì´ë„ˆ */
      .chart-container {
        background: white;
        border-radius: var(--radius-xl);
        padding: var(--spacing-xl);
        box-shadow: var(--shadow-md);
        border: 1px solid var(--gray-200);
        margin-bottom: var(--spacing-xl);
      }

      .chart-container canvas {
        max-height: 400px;
      }

      /* ğŸ” ê²€ìƒ‰ë°” */
      .search-bar {
        position: relative;
        max-width: 500px;
      }

      .search-bar input {
        padding-left: 48px;
        background: white;
        border: 2px solid var(--gray-200);
        border-radius: var(--radius-lg);
      }

      .search-bar input:focus {
        border-color: var(--primary-500);
        box-shadow: 0 0 0 4px var(--primary-50);
      }

      .search-bar i {
        position: absolute;
        left: var(--spacing-lg);
        top: 50%;
        transform: translateY(-50%);
        color: var(--gray-400);
        font-size: 18px;
      }

      /* ğŸ“± ì•Œë¦¼/í† ìŠ¤íŠ¸ ê°œì„  */
      .toast {
        border: none;
        border-radius: var(--radius-lg);
        box-shadow: var(--shadow-xl);
        backdrop-filter: blur(10px);
        animation: slideIn 0.3s ease;
      }

      @keyframes slideIn {
        from {
          transform: translateX(100%);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }

      .toast-header {
        background: linear-gradient(135deg, var(--gray-50), white);
        border-bottom: 1px solid var(--gray-200);
        font-weight: 600;
      }

      .toast-body {
        padding: var(--spacing-lg);
        color: var(--gray-700);
      }

      /* ğŸ¯ í˜ì´ì§€ í—¤ë” */
      .page-header {
        background: white;
        border-radius: var(--radius-xl);
        padding: var(--spacing-xl) var(--spacing-2xl);
        margin-bottom: var(--spacing-2xl);
        box-shadow: var(--shadow-md);
        border: 1px solid var(--gray-200);
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .page-title {
        font-size: 32px;
        font-weight: 800;
        color: var(--gray-900);
        margin: 0;
        background: linear-gradient(135deg, var(--gray-900), var(--gray-700));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      /* ğŸ¨ Dropdown ê°œì„  */
      .dropdown-menu {
        border: none;
        border-radius: var(--radius-lg);
        box-shadow: var(--shadow-xl);
        padding: var(--spacing-sm);
        margin-top: var(--spacing-sm);
        animation: fadeIn 0.2s ease;
      }

      .dropdown-item {
        border-radius: var(--radius-md);
        padding: var(--spacing-md) var(--spacing-lg);
        font-size: 14px;
        font-weight: 500;
        color: var(--gray-700);
        transition: all 0.2s ease;
      }

      .dropdown-item:hover {
        background: var(--primary-50);
        color: var(--primary-700);
      }

      .dropdown-item i {
        margin-right: var(--spacing-sm);
        width: 20px;
      }

      /* ğŸ¯ í•„í„° ë°•ìŠ¤ */
      .filter-box {
        background: white;
        border-radius: var(--radius-lg);
        padding: var(--spacing-lg);
        margin-bottom: var(--spacing-xl);
        border: 1px solid var(--gray-200);
        box-shadow: var(--shadow-sm);
      }

      .filter-box .btn-group {
        display: flex;
        gap: var(--spacing-sm);
        flex-wrap: wrap;
      }

      /* ğŸ“Š ì§„í–‰ë¥  ë°” */
      .progress {
        height: 8px;
        border-radius: var(--radius-md);
        background: var(--gray-100);
        overflow: hidden;
      }

      .progress-bar {
        background: linear-gradient(90deg, var(--primary-500), var(--primary-600));
        transition: width 0.6s ease;
      }

      /* ğŸ¨ Alerts */
      .alert {
        border: none;
        border-radius: var(--radius-lg);
        padding: var(--spacing-lg) var(--spacing-xl);
        margin-bottom: var(--spacing-lg);
        display: flex;
        align-items: center;
        gap: var(--spacing-md);
        box-shadow: var(--shadow-sm);
      }

      .alert-success {
        background: #dcfce7;
        color: #166534;
        border-left: 4px solid #16a34a;
      }

      .alert-danger {
        background: #fee2e2;
        color: #991b1b;
        border-left: 4px solid #dc2626;
      }

      .alert-warning {
        background: #fef3c7;
        color: #92400e;
        border-left: 4px solid #f59e0b;
      }

      .alert-info {
        background: #dbeafe;
        color: #1e40af;
        border-left: 4px solid #3b82f6;
      }

      /* ğŸ¯ ë¹ˆ ìƒíƒœ */
      .empty-state {
        text-align: center;
        padding: var(--spacing-2xl) var(--spacing-xl);
        color: var(--gray-500);
      }

      .empty-state i {
        font-size: 64px;
        color: var(--gray-300);
        margin-bottom: var(--spacing-lg);
      }

      .empty-state h3 {
        color: var(--gray-700);
        font-weight: 600;
        margin-bottom: var(--spacing-sm);
      }

      .empty-state p {
        color: var(--gray-500);
        margin-bottom: var(--spacing-lg);
      }
      
    </style>
  </head>  <body>
    <!-- ëª¨ë°”ì¼ í–„ë²„ê±° ë©”ë‰´ -->
    <button class="mobile-menu-toggle" id="mobileMenuToggle">
      <i class="fas fa-bars"></i>
    </button>

    <!-- ëª¨ë°”ì¼ ì˜¤ë²„ë ˆì´ -->
    <div class="mobile-overlay" id="mobileOverlay"></div>

    <!-- ê¸€ë¡œë²Œ ë¡œë”© ìŠ¤í”¼ë„ˆ -->
    <div id="globalLoader" class="global-loader">
      <div class="loader-content">
        <div class="spinner"></div>
        <p>ë¡œë”© ì¤‘...</p>
      </div>
    </div>

    <!-- í† ìŠ¤íŠ¸ ë©”ì‹œì§€ ì»¨í…Œì´ë„ˆ -->
    <div id="toastContainer" class="toast-container"></div>    <nav class="main-nav" id="mainNav">
      <!-- ë¡œê³  ë§í¬ - ë¡œê·¸ì¸ ìƒíƒœì— ë”°ë¼ ë‹¤ë¥´ê²Œ -->
      {% if user.is_authenticated %}
      <a href="{% url 'reporting:dashboard' %}" class="logo">Sales System</a>
      {% else %}
      <a href="{% url 'reporting:login' %}" class="logo">Sales System</a>
      {% endif %}
      <!-- ë¡œê³  ë§í¬ ëŒ€ì‹œë³´ë“œë¡œ ë³€ê²½ -->
      <ul>
        <!-- ëŒ€ì‹œë³´ë“œ ë©”ë‰´ - ë¡œê·¸ì¸í•œ ì‚¬ìš©ìë§Œ -->
        {% if user.is_authenticated %}
        <li>
          <a
            href="{% url 'reporting:dashboard' %}"
            class="{% if request.resolver_match.url_name == 'dashboard' %}active{% endif %}"
            ><i class="fas fa-home me-2"></i>ëŒ€ì‹œë³´ë“œ</a
          >
        </li>
        {% endif %}

        <!-- Admin ì „ìš© ë©”ë‰´ -->
        {% if user.is_authenticated and user.userprofile.role == 'admin' %}
        <li>
          <a
            href="{% url 'reporting:user_list' %}"
            class="{% if request.resolver_match.url_name|slice:':4' == 'user' %}active{% endif %}"
            ><i class="fas fa-users me-2"></i>ì‚¬ìš©ì ê´€ë¦¬</a
          >
        </li>
        {% endif %}

        <!-- Manager ì „ìš© ì‚¬ìš©ì ê´€ë¦¬ ë©”ë‰´ -->
        {% if user.is_authenticated and user.userprofile.role == 'manager' %}
        <li>
          <a
            href="{% url 'reporting:manager_user_list' %}"
            class="{% if request.resolver_match.url_name|slice:':12' == 'manager_user' %}active{% endif %}"
            ><i class="fas fa-user-friends me-2"></i>ì§ì› ê´€ë¦¬</a
          >
        </li>
        {% endif %}

        <!-- Admin & Salesman ì—…ì²´ ê´€ë¦¬ ë©”ë‰´ -->
        {% if user.is_authenticated and user.userprofile.role == 'admin' or user.is_authenticated and user.userprofile.role == 'salesman' %}
        <li>
          <a
            href="{% url 'reporting:company_list' %}"
            class="{% if request.resolver_match.url_name|slice:':7' == 'company' or request.resolver_match.url_name|slice:':10' == 'department' %}active{% endif %}"
            ><i class="fas fa-building me-2"></i>ì—…ì²´ ê´€ë¦¬</a
          >
        </li>
        {% endif %}

        <!-- Manager ì „ìš© ë©”ë‰´ -->
        {% if user.is_authenticated and user.userprofile.role == 'manager' %}
        <li>
          <a
            href="{% url 'reporting:customer_report' %}"
            class="{% if request.resolver_match.url_name == 'customer_report' or request.resolver_match.url_name == 'customer_detail_report' %}active{% endif %}"
            ><i class="fas fa-chart-bar me-2"></i>ê³ ê° ë¦¬í¬íŠ¸</a
          >
        </li>
        <li>
          <a
            href="{% url 'reporting:manager_company_list' %}"
            class="{% if request.resolver_match.url_name|slice:':15' == 'manager_company' %}active{% endif %}"
            ><i class="fas fa-building me-2"></i>ì—…ì²´ ì¡°íšŒ</a
          >
        </li>
        {% endif %}

        <!-- Salesman & Admin ê³µí†µ ë©”ë‰´ -->
        {% if user.is_authenticated and user.userprofile.role != 'manager' %}
        <li>
          <a
            href="{% url 'reporting:followup_list' %}"
            class="{% if request.resolver_match.url_name|slice:':8' == 'followup' %}active{% endif %}"
            ><i class="fas fa-user-check me-2"></i>íŒ”ë¡œìš°ì—…</a
          >
        </li>
        <li>
          <a
            href="{% url 'reporting:schedule_list' %}"
            class="{% if request.resolver_match.url_name == 'schedule_list' %}active{% endif %}"
            ><i class="fas fa-list me-2"></i>ì¼ì • ëª©ë¡</a
          >
        </li>
        <li>
          <a
            href="{% url 'reporting:schedule_calendar' %}"
            class="{% if request.resolver_match.url_name == 'schedule_calendar' %}active{% endif %}"
            ><i class="fas fa-calendar me-2"></i>ì¼ì • ìº˜ë¦°ë”</a
          >
        </li>
        <li>
          <a
            href="{% url 'reporting:history_list' %}"
            class="{% if request.resolver_match.url_name|slice:':7' == 'history' %}active{% endif %}"
            ><i class="fas fa-history me-2"></i>íˆìŠ¤í† ë¦¬</a
          >
        </li>
        <li>
          <a
            href="{% url 'reporting:customer_report' %}"
            class="{% if request.resolver_match.url_name|slice:':8' == 'customer' %}active{% endif %}"
            ><i class="fas fa-chart-bar me-2"></i>ê³ ê° ë¦¬í¬íŠ¸</a
          >
        </li>
        {% endif %}

        <!-- í”„ë¡œí•„ ë©”ë‰´ - ëª¨ë“  ë¡œê·¸ì¸ ì‚¬ìš©ì -->
        {% if user.is_authenticated %}
        <li>
          <a
            href="{% url 'reporting:profile' %}"
            class="{% if request.resolver_match.url_name == 'profile' or request.resolver_match.url_name == 'profile_edit' %}active{% endif %}"
            ><i class="fas fa-user-cog me-2"></i>í”„ë¡œí•„ ê´€ë¦¬</a
          >
        </li>
        {% endif %}
      </ul>
    </nav>
    <main class="main-content">
      <!-- ìƒë‹¨ í—¤ë” ë°” -->
      <div class="top-header-bar">
        <div class="container-fluid d-flex justify-content-between align-items-center">
          <div class="page-title">
            <h5 class="mb-0">{% block page_title %}ì˜ì—… ë³´ê³  ì‹œìŠ¤í…œ{% endblock %}</h5>
          </div>
          <div class="user-actions-top">
            <!-- PWA ì„¤ì¹˜ ë²„íŠ¼ -->
            <button id="install-button" class="btn btn-outline-primary btn-sm me-2" style="display: none;">
              <i class="fas fa-mobile-alt me-1"></i>ì•± ì„¤ì¹˜
            </button>
            
            {% if user.is_authenticated %}
            <span class="user-info-compact me-3">
              <i class="fas fa-user me-1"></i>{{ user.username }}
              {% if user.userprofile %}
              <small class="text-muted ms-1">({{ user.userprofile.get_role_display }})</small>
              {% endif %}
            </span>
            <button id="logoutBtn" onclick="confirmLogout()" class="logout-btn-top">
              <i class="fas fa-sign-out-alt me-1"></i>ë¡œê·¸ì•„ì›ƒ
            </button>
            {% else %}
            <a href="{% url 'reporting:login' %}" class="login-btn-top">
              <i class="fas fa-sign-in-alt me-1"></i>ë¡œê·¸ì¸
            </a>
            {% endif %}
          </div>
        </div>
      </div>
      
      <div class="container">
        <!-- Django Messages í‘œì‹œ -->
        {% if messages %}
        <script>
          document.addEventListener('DOMContentLoaded', function() {
            {% for message in messages %}
            {% if message.tags == 'success' %}
              ToastManager.success('{{ message|escapejs }}');
            {% elif message.tags == 'error' %}
              ToastManager.error('{{ message|escapejs }}');
            {% elif message.tags == 'warning' %}
              ToastManager.warning('{{ message|escapejs }}');
            {% else %}
              ToastManager.info('{{ message|escapejs }}');
            {% endif %}
            {% endfor %}
          });
        </script>
        {% endif %} 
        
        <!-- í€µ ë„¤ë¹„ê²Œì´ì…˜ ë°” (ëŒ€ì‹œë³´ë“œ ì œì™¸) -->
        {% if user.is_authenticated and request.resolver_match.url_name != 'dashboard' and request.resolver_match.url_name != 'manager_dashboard' %}
        <div class="quick-nav-bar mb-4">
          <div class="d-flex flex-wrap gap-2 justify-content-center">
            <a href="{% url 'reporting:dashboard' %}" class="btn btn-sm btn-outline-dark">
              <i class="fas fa-home me-1"></i>ëŒ€ì‹œë³´ë“œ
            </a>
            
            {% if user.is_authenticated and user.userprofile.role != 'manager' %}
            <a href="{% url 'reporting:followup_list' %}" class="btn btn-sm btn-outline-primary">
              <i class="fas fa-user-check me-1"></i>íŒ”ë¡œìš°ì—…
            </a>
            <a href="{% url 'reporting:schedule_list' %}" class="btn btn-sm btn-outline-info">
              <i class="fas fa-list me-1"></i>ì¼ì • ëª©ë¡
            </a>
            <a href="{% url 'reporting:schedule_calendar' %}" class="btn btn-sm btn-outline-success">
              <i class="fas fa-calendar me-1"></i>ì¼ì • ìº˜ë¦°ë”
            </a>
            <a href="{% url 'reporting:history_list' %}" class="btn btn-sm btn-outline-warning">
              <i class="fas fa-history me-1"></i>íˆìŠ¤í† ë¦¬
            </a>
            <a href="{% url 'reporting:company_list' %}" class="btn btn-sm btn-outline-secondary">
              <i class="fas fa-building me-1"></i>ì—…ì²´ê´€ë¦¬
            </a>
            {% endif %}
            
            {% if user.is_authenticated and user.userprofile.role == 'manager' %}
            <a href="{% url 'reporting:manager_dashboard' %}" class="btn btn-sm btn-outline-primary">
              <i class="fas fa-chart-line me-1"></i>Manager ëŒ€ì‹œë³´ë“œ
            </a>
            <a href="{% url 'reporting:schedule_calendar' %}{% if request.GET.user %}?user={{ request.GET.user }}{% endif %}" class="btn btn-sm btn-outline-info">
              <i class="fas fa-calendar-alt me-1"></i>ì¼ì • ìº˜ë¦°ë”
            </a>
            <a href="{% url 'reporting:manager_company_list' %}" class="btn btn-sm btn-outline-secondary">
              <i class="fas fa-building me-1"></i>ì—…ì²´ ì¡°íšŒ
            </a>
            <a href="{% url 'reporting:manager_user_list' %}" class="btn btn-sm btn-outline-warning">
              <i class="fas fa-user-friends me-1"></i>ì§ì› ê´€ë¦¬
            </a>
            {% endif %}

            {% if user.is_authenticated and user.userprofile.role == 'admin' %}
            <a href="{% url 'reporting:user_list' %}" class="btn btn-sm btn-outline-danger">
              <i class="fas fa-users me-1"></i>ì‚¬ìš©ì ê´€ë¦¬
            </a>
            {% endif %}
          </div>
        </div>
        {% endif %}

        {% block content %}
        <!-- í˜ì´ì§€ë³„ ì»¨í…ì¸ ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤. -->
        {% endblock %}
      </div>
    </main>
    <!-- Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>    <!-- ê¸€ë¡œë²Œ JavaScript ìœ í‹¸ë¦¬í‹° -->
    <script>
      // ì „ì—­ CSRF í† í° í•¨ìˆ˜
      function getCSRFToken() {
        // 1. ë©”íƒ€ íƒœê·¸ì—ì„œ ê°€ì ¸ì˜¤ê¸°
        const csrfMeta = document.querySelector('meta[name="csrf-token"]');
        if (csrfMeta && csrfMeta.getAttribute("content")) {
          return csrfMeta.getAttribute("content");
        }
        
        // 2. ì¿ í‚¤ì—ì„œ ê°€ì ¸ì˜¤ê¸°
        const csrfCookie = document.cookie.split(';')
          .find(cookie => cookie.trim().startsWith('csrftoken='));
        if (csrfCookie) {
          return csrfCookie.split('=')[1];
        }
        
        // 3. í¼ì˜ hidden inputì—ì„œ ê°€ì ¸ì˜¤ê¸°
        const csrfInput = document.querySelector('input[name="csrfmiddlewaretoken"]');
        if (csrfInput && csrfInput.value) {
          return csrfInput.value;
        }
        
        console.warn('CSRF token not found!');
        return '';
      }

      // AJAX ìš”ì²­ì„ ìœ„í•œ ì „ì—­ ì„¤ì •
      function setupCSRFForAjax() {
        const csrfToken = getCSRFToken();
        
        // fetch APIë¥¼ ìœ„í•œ ê¸°ë³¸ í—¤ë” ì„¤ì • í•¨ìˆ˜
        window.fetchWithCSRF = function(url, options = {}) {
          const defaultOptions = {
            headers: {
              'X-CSRFToken': csrfToken,
              'Content-Type': 'application/json',
              ...options.headers
            }
          };
          return fetch(url, { ...defaultOptions, ...options });
        };
      }

      // ê¸€ë¡œë²Œ ë¡œë”© ìŠ¤í”¼ë„ˆ ê´€ë¦¬
      const GlobalLoader = {
        show() {
          document.getElementById("globalLoader").style.display = "flex";
        },
        hide() {
          document.getElementById("globalLoader").style.display = "none";
        },
      };

      // í† ìŠ¤íŠ¸ ë©”ì‹œì§€ ì‹œìŠ¤í…œ
      const ToastManager = {
        show(message, type = "info", duration = 5000) {
          const container = document.getElementById("toastContainer");
          const toast = document.createElement("div");
          toast.className = `toast toast-${type}`;

          const icons = {
            success: "fas fa-check-circle",
            error: "fas fa-exclamation-circle",
            warning: "fas fa-exclamation-triangle",
            info: "fas fa-info-circle",
          };

          toast.innerHTML = `
            <i class="toast-icon ${icons[type] || icons.info}"></i>
            <div class="toast-message">${message}</div>
            <button class="toast-close" onclick="this.parentElement.remove()">
              <i class="fas fa-times"></i>
            </button>
          `;

          container.appendChild(toast);

          // ì• ë‹ˆë©”ì´ì…˜ìœ¼ë¡œ í‘œì‹œ
          setTimeout(() => toast.classList.add("show"), 10);

          // ìë™ ì‚­ì œ
          setTimeout(() => {
            toast.classList.remove("show");
            setTimeout(() => toast.remove(), 300);
          }, duration);
        },

        success(message, duration) {
          this.show(message, "success", duration);
        },

        error(message, duration) {
          this.show(message, "error", duration);
        },

        warning(message, duration) {
          this.show(message, "warning", duration);
        },

        info(message, duration) {
          this.show(message, "info", duration);
        },
      };

      // í¼ ì œì¶œ ì‹œ ë¡œë”© í‘œì‹œ
      document.addEventListener("DOMContentLoaded", function () {
        // ëª¨ë“  í¼ì— ì œì¶œ ì‹œ ë¡œë”© ìŠ¤í”¼ë„ˆ í‘œì‹œ
        document.querySelectorAll("form").forEach((form) => {
          form.addEventListener("submit", function () {
            GlobalLoader.show();
          });
        });

        // ëª¨ë“  ë§í¬ í´ë¦­ ì‹œ ë¡œë”© í‘œì‹œ (ì™¸ë¶€ ë§í¬ ì œì™¸)
        document.querySelectorAll("a[href]").forEach((link) => {
          if (link.hostname === window.location.hostname || !link.hostname) {
            link.addEventListener("click", function (e) {
              if (!this.target || this.target === "_self") {
                GlobalLoader.show();
              }
            });
          }
        });

        // í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ ì‹œ ë¡œë”© ìŠ¤í”¼ë„ˆ ìˆ¨ê¹€
        window.addEventListener("load", function () {
          GlobalLoader.hide();
        });

        // Ajax ìš”ì²­ ì¤‘ ë¡œë”© í‘œì‹œ (jQueryê°€ ìˆëŠ” ê²½ìš°)
        if (typeof $ !== "undefined") {
          $(document)
            .ajaxStart(function () {
              GlobalLoader.show();
            })
            .ajaxStop(function () {
              GlobalLoader.hide();
            });
        }
      });

      // ì—ëŸ¬ ì²˜ë¦¬ ìœ í‹¸ë¦¬í‹°
      const ErrorHandler = {
        handle(error, userMessage = "ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.") {
          console.error("Application Error:", error);
          ToastManager.error(userMessage);
          GlobalLoader.hide();
        },

        network(error) {
          this.handle(error, "ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì„ í™•ì¸í•´ì£¼ì„¸ìš”.");
        },

        validation(message) {
          ToastManager.warning(message || "ì…ë ¥ê°’ì„ í™•ì¸í•´ì£¼ì„¸ìš”.");
        },
      };      // ë¡œê·¸ì•„ì›ƒ í™•ì¸ í•¨ìˆ˜
      function confirmLogout() {
        // ì»¤ìŠ¤í…€ í™•ì¸ ë‹¤ì´ì–¼ë¡œê·¸ (ë” ì„¸ë ¨ëœ ìŠ¤íƒ€ì¼)
        const result = confirm(
          "ğŸšª ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n\ní˜„ì¬ ì‘ì—… ì¤‘ì¸ ë‚´ìš©ì´ ìˆë‹¤ë©´ ì €ì¥ í›„ ë¡œê·¸ì•„ì›ƒí•´ì£¼ì„¸ìš”."
        );

        if (result) {
          // ë¡œê·¸ì•„ì›ƒ ì§„í–‰ ë©”ì‹œì§€ í‘œì‹œ
          ToastManager.info("ë¡œê·¸ì•„ì›ƒ ì¤‘ì…ë‹ˆë‹¤...", 2000);
          GlobalLoader.show();

          // ì•½ê°„ì˜ ì§€ì—° í›„ ë¡œê·¸ì•„ì›ƒ ì‹¤í–‰ (UX ê°œì„ )
          setTimeout(() => {
            const form = document.createElement("form");
            form.method = "POST";
            form.action = '{% url "reporting:logout" %}';

            // CSRF í† í° ì¶”ê°€
            const csrfInput = document.createElement("input");
            csrfInput.type = "hidden";
            csrfInput.name = "csrfmiddlewaretoken";
            csrfInput.value = "{{ csrf_token }}";
            form.appendChild(csrfInput);

            document.body.appendChild(form);
            form.submit();
          }, 500);
        }
      }

      // ì „ì—­ ì—ëŸ¬ í•¸ë“¤ëŸ¬
      window.addEventListener("error", function (e) {
        ErrorHandler.handle(e.error, "ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
      });

      window.addEventListener("unhandledrejection", function (e) {
        ErrorHandler.handle(e.reason, "ìš”ì²­ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
      });

      // ë¸Œë¼ìš°ì € íˆìŠ¤í† ë¦¬ ê´€ë¦¬ ê°œì„ 
      (function () {
        // ë’¤ë¡œê°€ê¸° ë²„íŠ¼ ì²˜ë¦¬
        window.addEventListener("pageshow", function (event) {
          // ë¸Œë¼ìš°ì € ìºì‹œì—ì„œ í˜ì´ì§€ê°€ ë¡œë“œë˜ì—ˆì„ ë•Œ ìƒˆë¡œê³ ì¹¨
          if (event.persisted) {
            window.location.reload();
          }
        });

        // ë¸Œë¼ìš°ì € íˆìŠ¤í† ë¦¬ ìƒíƒœ ê´€ë¦¬
        window.addEventListener("popstate", function (event) {
          // ë¡œë”© ìŠ¤í”¼ë„ˆ ìˆ¨ê¸°ê¸° (í˜¹ì‹œ ë‚¨ì•„ìˆì„ ê²½ìš°)
          if (typeof GlobalLoader !== "undefined") {
            GlobalLoader.hide();
          }
        });

        // í˜ì´ì§€ ì–¸ë¡œë“œ ì‹œ ì •ë¦¬
        window.addEventListener("beforeunload", function () {
          // ì§„í–‰ ì¤‘ì¸ AJAX ìš”ì²­ì´ ìˆë‹¤ë©´ ì •ë¦¬
          if (typeof GlobalLoader !== "undefined") {
            GlobalLoader.hide();
          }
        });

        // ë„¤íŠ¸ì›Œí¬ ìƒíƒœ ê°ì§€
        window.addEventListener("online", function () {
          if (typeof ToastManager !== "undefined") {
            ToastManager.success("ì¸í„°ë„· ì—°ê²°ì´ ë³µêµ¬ë˜ì—ˆìŠµë‹ˆë‹¤.", 3000);
          }
        });

        window.addEventListener("offline", function () {
          if (typeof ToastManager !== "undefined") {
            ToastManager.warning("ì¸í„°ë„· ì—°ê²°ì´ ëŠì–´ì¡ŒìŠµë‹ˆë‹¤.", 5000);
          }
        });

        // í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ í›„ ì´ˆê¸°í™”
        document.addEventListener("DOMContentLoaded", function () {
          // ëª¨ë“  í¼ ì œì¶œ ì‹œ ë¡œë”© í‘œì‹œ
          const forms = document.querySelectorAll("form:not([data-no-loader])");
          forms.forEach(function (form) {
            form.addEventListener("submit", function () {
              if (typeof GlobalLoader !== "undefined") {
                GlobalLoader.show();
              }
            });
          });

          // ëª¨ë“  ë§í¬ì— ëŒ€í•œ ì²˜ë¦¬
          const links = document.querySelectorAll(
            'a[href]:not([target="_blank"]):not([data-no-loader])'
          );
          links.forEach(function (link) {
            link.addEventListener("click", function (event) {
              // ì™¸ë¶€ ë§í¬ë‚˜ íŠ¹ìˆ˜ ë§í¬ëŠ” ì œì™¸
              const href = link.getAttribute("href");
              if (
                href &&
                !href.startsWith("#") &&
                !href.startsWith("javascript:") &&
                !href.startsWith("mailto:") &&
                !href.startsWith("tel:")
              ) {
                if (typeof GlobalLoader !== "undefined") {
                  GlobalLoader.show();
                }

                // 3ì´ˆ í›„ì—ë„ í˜ì´ì§€ê°€ ë¡œë“œë˜ì§€ ì•Šìœ¼ë©´ ë¡œë”© ìˆ¨ê¸°ê¸°
                setTimeout(function () {
                  if (typeof GlobalLoader !== "undefined") {
                    GlobalLoader.hide();
                  }
                }, 3000);
              }            });
          });
        });
      })();      // ëª¨ë°”ì¼ ë„¤ë¹„ê²Œì´ì…˜ í† ê¸€ ê¸°ëŠ¥ ë° ì „ì²´ ì´ˆê¸°í™”
      document.addEventListener('DOMContentLoaded', function() {
        // CSRF ì„¤ì • ì´ˆê¸°í™”
        setupCSRFForAjax();
        
        // ëª¨ë°”ì¼ ë„¤ë¹„ê²Œì´ì…˜ ì„¤ì •
        const mobileMenuToggle = document.getElementById('mobileMenuToggle');
        const mainNav = document.getElementById('mainNav');
        const mobileOverlay = document.getElementById('mobileOverlay');

        if (mobileMenuToggle && mainNav && mobileOverlay) {
          console.log('Mobile navigation elements found'); // ë””ë²„ê¹…ìš©
          
          // í–„ë²„ê±° ë©”ë‰´ í´ë¦­ ì‹œ ì‚¬ì´ë“œë°” í† ê¸€ (í„°ì¹˜ ê°œì„ )
          mobileMenuToggle.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            console.log('Mobile menu toggle clicked'); // ë””ë²„ê¹…ìš©
            
            // í† ê¸€ ë²„íŠ¼ ì• ë‹ˆë©”ì´ì…˜
            mobileMenuToggle.classList.toggle('active');
            
            mainNav.classList.toggle('show');
            mobileOverlay.classList.toggle('show');
            document.body.style.overflow = mainNav.classList.contains('show') ? 'hidden' : '';
          });

          // í„°ì¹˜ í”¼ë“œë°± ê°œì„ 
          mobileMenuToggle.addEventListener('touchstart', function() {
            this.style.transform = 'scale(0.95)';
          });
          
          mobileMenuToggle.addEventListener('touchend', function() {
            setTimeout(() => {
              this.style.transform = '';
            }, 100);
          });

          // ìŠ¤ì™€ì´í”„ ì œìŠ¤ì²˜ë¡œ ë©”ë‰´ ì œì–´
          let startX = null;
          let startY = null;
          let currentX = null;
          let currentY = null;
          
          document.addEventListener('touchstart', function(e) {
            startX = e.touches[0].clientX;
            startY = e.touches[0].clientY;
          }, {passive: true});
          
          document.addEventListener('touchmove', function(e) {
            if (!startX || !startY) return;
            
            currentX = e.touches[0].clientX;
            currentY = e.touches[0].clientY;
            
            const diffX = currentX - startX;
            const diffY = currentY - startY;
            
            // ìˆ˜í‰ ìŠ¤ì™€ì´í”„ê°€ ë” í´ ë•Œë§Œ ì²˜ë¦¬
            if (Math.abs(diffX) > Math.abs(diffY)) {
              // ì™¼ìª½ì—ì„œ ì˜¤ë¥¸ìª½ìœ¼ë¡œ ìŠ¤ì™€ì´í”„ (ë©”ë‰´ ì—´ê¸°)
              if (diffX > 50 && startX < 50 && !mainNav.classList.contains('show')) {
                mainNav.classList.add('show');
                mobileOverlay.classList.add('show');
                mobileMenuToggle.classList.add('active');
                document.body.style.overflow = 'hidden';
              }
              // ì˜¤ë¥¸ìª½ì—ì„œ ì™¼ìª½ìœ¼ë¡œ ìŠ¤ì™€ì´í”„ (ë©”ë‰´ ë‹«ê¸°)
              else if (diffX < -50 && mainNav.classList.contains('show')) {
                mainNav.classList.remove('show');
                mobileOverlay.classList.remove('show');
                mobileMenuToggle.classList.remove('active');
                document.body.style.overflow = '';
              }
            }
          }, {passive: true});
          
          document.addEventListener('touchend', function() {
            startX = null;
            startY = null;
            currentX = null;
            currentY = null;
          }, {passive: true});

          // ì˜¤ë²„ë ˆì´ í´ë¦­ ì‹œ ì‚¬ì´ë“œë°” ë‹«ê¸°
          mobileOverlay.addEventListener('click', function(e) {
            e.preventDefault();
            mainNav.classList.remove('show');
            mobileOverlay.classList.remove('show');
            mobileMenuToggle.classList.remove('active');
            document.body.style.overflow = '';
          });

          // ë„¤ë¹„ê²Œì´ì…˜ ë§í¬ í´ë¦­ ì‹œ ë©”ë‰´ ë‹«ê¸°
          const navLinks = mainNav.querySelectorAll('a');
          navLinks.forEach(function(link) {
            link.addEventListener('click', function() {
              if (window.innerWidth <= 768) {
                mainNav.classList.remove('show');
                mobileOverlay.classList.remove('show');
                mobileMenuToggle.classList.remove('active');
                document.body.style.overflow = '';
              }
            });
          });

          // ìœˆë„ìš° ë¦¬ì‚¬ì´ì¦ˆ ì‹œ ëª¨ë°”ì¼ ë©”ë‰´ ì´ˆê¸°í™”
          window.addEventListener('resize', function() {
            if (window.innerWidth > 768) {
              mainNav.classList.remove('show');
              mobileOverlay.classList.remove('show');
              document.body.style.overflow = '';
            }
          });

          // ESC í‚¤ë¡œ ì‚¬ì´ë“œë°” ë‹«ê¸°
          document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape' && mainNav.classList.contains('show')) {
              mainNav.classList.remove('show');
              mobileOverlay.classList.remove('show');
              mobileMenuToggle.classList.remove('active');
              document.body.style.overflow = '';
            }
          });
        } else {
          console.log('Mobile navigation elements not found:', {
            mobileMenuToggle: !!mobileMenuToggle,
            mainNav: !!mainNav,
            mobileOverlay: !!mobileOverlay
          });
        }
      });

      // í„°ì¹˜ ì¸í„°í˜ì´ìŠ¤ ê°œì„  ê¸°ëŠ¥ë“¤
      (function() {
        // Pull-to-refresh ê¸°ëŠ¥
        let startY = 0;
        let pullDistance = 0;
        let isPulling = false;
        
        document.addEventListener('touchstart', function(e) {
          if (window.scrollY === 0) {
            startY = e.touches[0].clientY;
          }
        }, {passive: true});
        
        document.addEventListener('touchmove', function(e) {
          if (window.scrollY === 0 && startY !== 0) {
            pullDistance = e.touches[0].clientY - startY;
            
            if (pullDistance > 0) {
              isPulling = true;
              // Pull-to-refresh í‘œì‹œê¸° ì—…ë°ì´íŠ¸
              const indicator = document.querySelector('.pull-to-refresh');
              if (!indicator) {
                const refreshDiv = document.createElement('div');
                refreshDiv.className = 'pull-to-refresh';
                refreshDiv.innerHTML = '<i class="fas fa-sync-alt"></i> ìƒˆë¡œê³ ì¹¨';
                document.body.appendChild(refreshDiv);
              }
              
              if (pullDistance > 80) {
                const refreshIndicator = document.querySelector('.pull-to-refresh');
                if (refreshIndicator) {
                  refreshIndicator.classList.add('show');
                }
              }
            }
          }
        }, {passive: true});
        
        document.addEventListener('touchend', function() {
          if (isPulling && pullDistance > 80) {
            // ìƒˆë¡œê³ ì¹¨ ì‹¤í–‰
            window.location.reload();
          }
          
          const indicator = document.querySelector('.pull-to-refresh');
          if (indicator) {
            indicator.classList.remove('show');
          }
          
          startY = 0;
          pullDistance = 0;
          isPulling = false;
        }, {passive: true});
        
        // ìŠ¤ì™€ì´í”„ í‘œì‹œê¸° (ë©”ë‰´ìš© ì´ì™¸ì˜ ì¼ë°˜ ìŠ¤ì™€ì´í”„)
        function showSwipeIndicator(direction, text) {
          const indicator = document.createElement('div');
          indicator.className = `swipe-indicator ${direction}`;
          indicator.textContent = text;
          document.body.appendChild(indicator);
          
          setTimeout(() => indicator.classList.add('show'), 10);
          setTimeout(() => {
            indicator.classList.remove('show');
            setTimeout(() => document.body.removeChild(indicator), 300);
          }, 1500);
        }
        
        // í„°ì¹˜ í”¼ë“œë°± ê°œì„ 
        document.addEventListener('touchstart', function(e) {
          const target = e.target.closest('.btn, .dropdown-item, .nav-link');
          if (target) {
            target.style.transform = 'scale(0.98)';
            target.style.transition = 'transform 0.1s ease';
          }
        }, {passive: true});
        
        document.addEventListener('touchend', function(e) {
          const target = e.target.closest('.btn, .dropdown-item, .nav-link');
          if (target) {
            setTimeout(() => {
              target.style.transform = '';
            }, 100);
          }
        }, {passive: true});
        
        // ìŠ¤í¬ë¡¤ ì„±ëŠ¥ ìµœì í™”
        let scrollTimeout;
        window.addEventListener('scroll', function() {
          document.body.classList.add('scrolling');
          
          clearTimeout(scrollTimeout);
          scrollTimeout = setTimeout(() => {
            document.body.classList.remove('scrolling');
          }, 150);
        }, {passive: true});
      })();
    </script>
  </body>
</html>
