{% extends 'reporting/base.html' %}
{% load static %}

{% block title %}TODOLIST - ì˜ì—… ë³´ê³  ì‹œìŠ¤í…œ{% endblock %}

{% block extra_css %}
<style>
    /* íƒ­ ìŠ¤íƒ€ì¼ - ê¸°ë³¸ ê²€ì€ìƒ‰, ì„ íƒ ì‹œ íŒŒë€ìƒ‰ */
    #todoTabs .nav-link {
        color: #333 !important;
        font-weight: 500;
        border: none;
        border-bottom: 2px solid transparent;
        background: transparent;
    }
    #todoTabs .nav-link:hover {
        color: #1e40af !important;
        border-bottom-color: #ddd;
    }
    #todoTabs .nav-link.active {
        color: #1e40af !important;
        font-weight: 600;
        border-bottom: 2px solid #1e40af !important;
        background: transparent;
    }
    
    /* ============================================
       ëª¨ë‹¬ Z-INDEX ë° ì˜¤ë²„ë ˆì´ ìˆ˜ì • (CRITICAL FIX)
       ============================================ */
    
    /* backdropì„ ì™„ì „íˆ íˆ¬ëª…í•˜ê²Œ (ë°°ê²½ ì—†ìŒ) */
    .modal-backdrop {
        display: none !important;
    }
    
    /* ëª¨ë‹¬ ìì²´ëŠ” backdropë³´ë‹¤ ë†’ê²Œ */
    .modal {
        z-index: 1055 !important;
        pointer-events: none !important;
    }
    
    /* ëª¨ë‹¬ì´ ì—´ë ¸ì„ ë•Œë§Œ í‘œì‹œ */
    .modal.show {
        display: flex !important;
        align-items: center;
        justify-content: center;
    }
    
    /* ëª¨ë‹¬ ë‹¤ì´ì–¼ë¡œê·¸ë§Œ í´ë¦­ ê°€ëŠ¥í•˜ê²Œ */
    .modal-dialog {
        z-index: 1056 !important;
        pointer-events: auto !important;
    }
    
    /* ëª¨ë‹¬ ì»¨í…ì¸ ë¥¼ í™•ì‹¤íˆ í´ë¦­ ê°€ëŠ¥í•˜ê²Œ */
    .modal-content {
        position: relative;
        z-index: 1057 !important;
        pointer-events: auto !important;
        background-color: #fff;
        border: 1px solid rgba(0, 0, 0, 0.2);
        border-radius: 0.5rem;
        box-shadow: 0 0.5rem 2rem rgba(0, 0, 0, 0.3);
    }
    
    /* ëª¨ë‹¬ ë‚´ë¶€ì˜ ëª¨ë“  ìš”ì†Œê°€ í´ë¦­ ê°€ëŠ¥í•˜ë„ë¡ */
    .modal-header,
    .modal-body,
    .modal-footer,
    .modal-header *,
    .modal-body *,
    .modal-footer * {
        pointer-events: auto !important;
    }
</style>
{% endblock %}

{% block content %}
<div class="container-fluid py-4">
    <!-- í—¤ë” -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <h2 class="mb-1">
                <i class="fas fa-tasks me-2 text-primary"></i>TODOLIST
            </h2>
            <p class="text-muted mb-0">í•  ì¼ì„ ê´€ë¦¬í•˜ê³  ì—…ë¬´ë¥¼ ì¶”ì í•˜ì„¸ìš”</p>
        </div>
        <div class="d-flex gap-2">
            <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#quickAddModal">
                <i class="fas fa-plus me-1"></i>ë¹ ë¥¸ ì¶”ê°€
            </button>
            <a href="{% url 'todos:create' %}" class="btn btn-outline-primary">
                <i class="fas fa-edit me-1"></i>ìƒì„¸ ì¶”ê°€
            </a>
        </div>
    </div>
    
    <!-- AI ì¶”ì²œ ì„¹ì…˜ (AI ê¸°ëŠ¥ í™œì„±í™”ëœ ì‚¬ìš©ìë§Œ) -->
    {% if request.user.userprofile.can_use_ai %}
    <div id="ai-suggestions-container">
        <div class="card shadow-sm border-0 mb-4" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
            <div class="card-header bg-transparent border-0 text-white py-3">
                <div class="d-flex justify-content-between align-items-center">
                    <h6 class="mb-0">
                        <i class="fas fa-robot me-2"></i>AI ì¶”ì²œ TODO
                    </h6>
                    <button type="button" class="btn btn-sm btn-outline-light" onclick="loadAISuggestions()">
                        <i class="fas fa-sync-alt"></i>
                    </button>
                </div>
            </div>
            <div class="card-body p-0" id="ai-suggestions-content">
                <div class="text-center py-4 text-white">
                    <i class="fas fa-robot fa-2x mb-2 opacity-50"></i>
                    <p class="mb-2 opacity-75">ë²„íŠ¼ì„ ëˆŒëŸ¬ AI ì¶”ì²œì„ ë°›ì•„ë³´ì„¸ìš”</p>
                    <button type="button" class="btn btn-light btn-sm" onclick="loadAISuggestions()">
                        <i class="fas fa-magic me-1"></i>AI ì¶”ì²œ ë°›ê¸°
                    </button>
                </div>
            </div>
        </div>
    </div>
    {% endif %}
    
    <!-- íƒ­ ë„¤ë¹„ê²Œì´ì…˜ -->
    <ul class="nav nav-tabs mb-4" id="todoTabs" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link {% if active_tab == 'my' %}active{% endif %}" 
                    id="my-tab" data-bs-toggle="tab" data-bs-target="#my" 
                    type="button" role="tab" aria-controls="my" aria-selected="{% if active_tab == 'my' %}true{% else %}false{% endif %}">
                <i class="fas fa-user me-1"></i>ë‚´ í•  ì¼
                <span class="badge bg-primary ms-1" id="my-count-badge" {% if my_count == 0 %}style="display:none"{% endif %}>{{ my_count }}</span>
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link {% if active_tab == 'received' %}active{% endif %}" 
                    id="received-tab" data-bs-toggle="tab" data-bs-target="#received" 
                    type="button" role="tab" aria-controls="received" aria-selected="{% if active_tab == 'received' %}true{% else %}false{% endif %}">
                <i class="fas fa-inbox me-1"></i>ë°›ì€ ì¼
                <span class="badge bg-warning text-dark ms-1" id="received-count-badge" {% if received_count == 0 %}style="display:none"{% endif %}>{{ received_count }}</span>
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link {% if active_tab == 'requested' %}active{% endif %}" 
                    id="requested-tab" data-bs-toggle="tab" data-bs-target="#requested" 
                    type="button" role="tab" aria-controls="requested" aria-selected="{% if active_tab == 'requested' %}true{% else %}false{% endif %}">
                <i class="fas fa-share me-1"></i>ë§¡ê¸´ ì¼
                <span class="badge bg-info ms-1" id="requested-count-badge" {% if requested_count == 0 %}style="display:none"{% endif %}>{{ requested_count }}</span>
            </button>
        </li>
    </ul>
    
    <!-- íƒ­ ì»¨í…ì¸  -->
    <div class="tab-content" id="todoTabContent">
        <!-- ë‚´ í•  ì¼ -->
        <div class="tab-pane fade {% if active_tab == 'my' %}show active{% endif %}" id="my" role="tabpanel" aria-labelledby="my-tab">
            <div id="my-todo-content" hx-get="{% url 'todos:my_list' %}" hx-trigger="load, todoCreated from:body, todoUpdated from:body, todoDeleted from:body" hx-swap="innerHTML">
                <div class="text-center py-5">
                    <div class="spinner-border text-primary" role="status">
                        <span class="visually-hidden">ë¡œë”©ì¤‘...</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ë°›ì€ ì¼ -->
        <div class="tab-pane fade {% if active_tab == 'received' %}show active{% endif %}" id="received" role="tabpanel" aria-labelledby="received-tab">
            <div id="received-todo-content" hx-get="{% url 'todos:received_list' %}" hx-trigger="revealed, todoUpdated from:body" hx-swap="innerHTML">
                <div class="text-center py-5">
                    <div class="spinner-border text-primary" role="status">
                        <span class="visually-hidden">ë¡œë”©ì¤‘...</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ë§¡ê¸´ ì¼ -->
        <div class="tab-pane fade {% if active_tab == 'requested' %}show active{% endif %}" id="requested" role="tabpanel" aria-labelledby="requested-tab">
            <div id="requested-todo-content" hx-get="{% url 'todos:requested_list' %}" hx-trigger="revealed, todoUpdated from:body" hx-swap="innerHTML">
                <div class="text-center py-5">
                    <div class="spinner-border text-primary" role="status">
                        <span class="visually-hidden">ë¡œë”©ì¤‘...</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- ë¹ ë¥¸ ì¶”ê°€ ëª¨ë‹¬ -->
<div class="modal fade" id="quickAddModal" tabindex="-1" aria-labelledby="quickAddModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="quickAddModalLabel">
                    <i class="fas fa-plus-circle me-2 text-primary"></i>ë¹ ë¥¸ TODO ì¶”ê°€
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <form id="quickAddForm" hx-post="{% url 'todos:api_quick_add' %}" hx-swap="none" hx-on::after-request="if(event.detail.successful) { this.reset(); bootstrap.Modal.getInstance(document.getElementById('quickAddModal')).hide(); htmx.trigger('#my-todo-content', 'todoCreated'); updateMyCount(1); }">
                {% csrf_token %}
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="quickTitle" class="form-label">í•  ì¼ ì œëª©</label>
                        <input type="text" class="form-control" id="quickTitle" name="title" placeholder="ì˜ˆ: ê²¬ì ì„œ ì‘ì„±í•˜ê¸°" required autofocus>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ì·¨ì†Œ</button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-plus me-1"></i>ì¶”ê°€
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- HTMX -->
<script src="https://unpkg.com/htmx.org@1.9.10"></script>
<script>
    // HTMXì— CSRF í† í° ìë™ í¬í•¨
    document.body.addEventListener('htmx:configRequest', function(evt) {
        evt.detail.headers['X-CSRFToken'] = '{{ csrf_token }}';
    });
    
    // íƒ­ ì¹´ìš´íŠ¸ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
    function updateMyCount(delta) {
        const badge = document.getElementById('my-count-badge');
        if (badge) {
            let count = parseInt(badge.textContent) || 0;
            count += delta;
            badge.textContent = count;
            badge.style.display = count > 0 ? '' : 'none';
        }
    }
    
    function updateReceivedCount(delta) {
        const badge = document.getElementById('received-count-badge');
        if (badge) {
            let count = parseInt(badge.textContent) || 0;
            count += delta;
            badge.textContent = count;
            badge.style.display = count > 0 ? '' : 'none';
        }
    }
    
    function updateRequestedCount(delta) {
        const badge = document.getElementById('requested-count-badge');
        if (badge) {
            let count = parseInt(badge.textContent) || 0;
            count += delta;
            badge.textContent = count;
            badge.style.display = count > 0 ? '' : 'none';
        }
    }
    
    // ì™„ë£Œ/ì§„í–‰ì¤‘ í† ê¸€ ì‹œ ì¹´ìš´íŠ¸ ì—…ë°ì´íŠ¸
    function updateCountOnToggle(tab, previousStatus) {
        // ì´ì „ ìƒíƒœê°€ doneì´ë©´ â†’ ongoingìœ¼ë¡œ ë³€ê²½ë¨ â†’ ì¹´ìš´íŠ¸ +1
        // ì´ì „ ìƒíƒœê°€ ongoingì´ë©´ â†’ doneìœ¼ë¡œ ë³€ê²½ë¨ â†’ ì¹´ìš´íŠ¸ -1
        const delta = previousStatus === 'done' ? 1 : -1;
        
        if (tab === 'my') {
            updateMyCount(delta);
        } else if (tab === 'received') {
            updateReceivedCount(delta);
        } else if (tab === 'requested') {
            updateRequestedCount(delta);
        }
    }
    
    // HX-Trigger ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ - ì„œë²„ì—ì„œ ë³´ë‚¸ ì¹´ìš´íŠ¸ ì—…ë°ì´íŠ¸ ì •ë³´ ì²˜ë¦¬
    document.body.addEventListener('todoStatusChanged', function(evt) {
        const data = evt.detail;
        if (data && data.prevStatus) {
            updateCountOnToggle(data.tab, data.prevStatus);
        }
    });
    
    // AI ì¶”ì²œ ë¡œë“œ (í”„ë¡œê·¸ë ˆìŠ¤ ëª¨ë‹¬ ì‚¬ìš©)
    async function loadAISuggestions() {
        await runAITaskWithDetails(
            'AI TODO ì¶”ì²œ',
            '{% url "todos:ai_suggestions" %}',
            {},
            
            // ìƒì„¸ ë¡œê·¸ ì½œë°±
            async function() {
                addAILog('â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”', 'info');
                addAILog('ğŸ¤– AI TODO ì¶”ì²œ ì‹œì‘', 'info');
                addAILog('â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”', 'info');
                await sleep(300);
                addAILog('ğŸ“§ ë¯¸ë‹µì¥ ì´ë©”ì¼ ë¶„ì„ ì¤‘...', 'info');
                await sleep(300);
                addAILog('ğŸ‘¤ ì—°ë½ í•„ìš” ê³ ê° ê²€ìƒ‰ ì¤‘...', 'info');
                await sleep(300);
                addAILog('ğŸ“„ ë§Œë£Œ ì„ë°• ê²¬ì  í™•ì¸ ì¤‘...', 'info');
                await sleep(300);
                addAILog('ğŸ¯ ì§„í–‰ì¤‘ì¸ ê¸°íšŒ ë¶„ì„ ì¤‘...', 'info');
                await sleep(300);
                addAILog('ğŸ“… ë‹¤ê°€ì˜¤ëŠ” ì¼ì • ì¤€ë¹„ í™•ì¸ ì¤‘...', 'info');
                await sleep(400);
                addAILog('ğŸ“ ìµœê·¼ íˆìŠ¤í† ë¦¬ AI ë¶„ì„ ì¤‘...', 'info');
                await sleep(300);
                addAILog('   - ë°ëª¨/ì‹œì—° ìš”ì²­ í‚¤ì›Œë“œ íƒìƒ‰', 'info');
                await sleep(200);
                addAILog('   - ì œí’ˆ ê´€ì‹¬/ë¬¸ì˜ í‚¤ì›Œë“œ íƒìƒ‰', 'info');
                await sleep(200);
                addAILog('   - ê²¬ì /êµìœ¡/A/S í‚¤ì›Œë“œ íƒìƒ‰', 'info');
                await sleep(300);
                addAILog('âœ¨ ì¶”ì²œ ëª©ë¡ ìƒì„± ì¤‘...', 'info');
            },
            
            // ì„±ê³µ ì½œë°±
            function(data) {
                if (data && data.html) {
                    document.getElementById('ai-suggestions-container').innerHTML = data.html;
                } else if (typeof data === 'string') {
                    document.getElementById('ai-suggestions-container').innerHTML = data;
                }
            },
            
            // ì—ëŸ¬ ì½œë°±
            function(error) {
                document.getElementById('ai-suggestions-content').innerHTML = `
                    <div class="text-center py-4 text-white">
                        <i class="fas fa-exclamation-triangle fa-2x mb-2"></i>
                        <p class="mb-0">ì¶”ì²œì„ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤</p>
                        <button type="button" class="btn btn-outline-light btn-sm mt-2" onclick="loadAISuggestions()">
                            <i class="fas fa-redo me-1"></i>ë‹¤ì‹œ ì‹œë„
                        </button>
                    </div>
                `;
            },
            
            // GET ìš”ì²­ ì‚¬ìš©
            'GET'
        );
    }
    
    // AI ì¶”ì²œ ìˆ˜ë½
    async function acceptAISuggestion(btn, title, description, duration, relatedType, relatedId) {
        btn.disabled = true;
        btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i>';
        
        try {
            const response = await fetch('{% url "todos:ai_accept" %}', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                    'X-CSRFToken': '{{ csrf_token }}'
                },
                body: new URLSearchParams({
                    title: title,
                    description: description,
                    duration: duration,
                    related_type: relatedType,
                    related_id: relatedId
                })
            });
            
            if (response.ok) {
                // ë¶€ëª¨ ìš”ì†Œ ì œê±° (ì• ë‹ˆë©”ì´ì…˜)
                const row = btn.closest('.list-group-item');
                row.style.transition = 'all 0.3s ease';
                row.style.opacity = '0';
                row.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    row.remove();
                    // ë‚¨ì€ ì¶”ì²œì´ ì—†ìœ¼ë©´ ë¹ˆ ìƒíƒœ í‘œì‹œ
                    const remaining = document.querySelectorAll('#ai-suggestions-container .list-group-item');
                    if (remaining.length === 0) {
                        loadAISuggestions();
                    }
                }, 300);
                
                // TODO ëª©ë¡ ìƒˆë¡œê³ ì¹¨
                htmx.trigger('#my-todo-content', 'todoCreated');
                
                // í† ìŠ¤íŠ¸ ì•Œë¦¼
                if (typeof showNotification === 'function') {
                    showNotification('TODOê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
                }
            }
        } catch (error) {
            btn.disabled = false;
            btn.innerHTML = '<i class="fas fa-plus"></i>';
            console.error('Error:', error);
        }
    }
    
    // AI ì¶”ì²œ ë¬´ì‹œ
    async function dismissAISuggestion(btn, key) {
        btn.disabled = true;
        
        try {
            const response = await fetch('{% url "todos:ai_dismiss" %}', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                    'X-CSRFToken': '{{ csrf_token }}'
                },
                body: new URLSearchParams({ key: key })
            });
            
            if (response.ok) {
                const row = btn.closest('.list-group-item');
                row.style.transition = 'all 0.3s ease';
                row.style.opacity = '0';
                row.style.height = '0';
                row.style.padding = '0';
                setTimeout(() => row.remove(), 300);
            }
        } catch (error) {
            btn.disabled = false;
            console.error('Error:', error);
        }
    }
    
    // AI ì¶”ì²œ ìƒì„¸ ëª¨ë‹¬ í‘œì‹œ
    function showSuggestionDetail(index) {
        const data = document.getElementById(`suggestion-data-${index}`);
        if (!data) {
            console.error('Suggestion data not found:', index);
            return;
        }
        
        const title = data.querySelector('.suggestion-title').textContent;
        const description = data.querySelector('.suggestion-description').textContent;
        const duration = data.querySelector('.suggestion-duration').textContent;
        const relatedType = data.querySelector('.suggestion-related-type').textContent;
        const relatedId = data.querySelector('.suggestion-related-id').textContent;
        const type = data.querySelector('.suggestion-type').textContent;
        const urgency = data.querySelector('.suggestion-urgency').textContent;
        const icon = data.querySelector('.suggestion-icon').textContent;
        const iconColor = data.querySelector('.suggestion-icon-color').textContent;
        const reason = data.querySelector('.suggestion-reason').innerHTML;
        
        // ëª¨ë‹¬ ë‚´ìš© ì±„ìš°ê¸°
        document.getElementById('modal-title').textContent = title;
        document.getElementById('modal-icon').className = `fas ${icon} fa-stack-1x ${iconColor}`;
        document.getElementById('modal-icon-bg').className = `fas fa-circle fa-stack-2x ${iconColor}`;
        document.getElementById('modal-reason').innerHTML = reason;
        
        // ê¸´ê¸‰ë„ ë°°ì§€
        const urgencyBadge = document.getElementById('modal-urgency-badge');
        if (urgency === 'high') {
            urgencyBadge.className = 'badge bg-danger';
            urgencyBadge.textContent = 'ê¸´ê¸‰';
        } else {
            urgencyBadge.className = 'badge bg-warning text-dark';
            urgencyBadge.textContent = 'ë³´í†µ';
        }
        
        // ì†Œìš”ì‹œê°„ ë°°ì§€
        const durationBadge = document.getElementById('modal-duration-badge');
        const mins = parseInt(duration);
        if (mins >= 60) {
            durationBadge.textContent = `ì˜ˆìƒ ${Math.floor(mins/60)}ì‹œê°„ ${mins%60 > 0 ? mins%60 + 'ë¶„' : ''}`;
        } else {
            durationBadge.textContent = `ì˜ˆìƒ ${mins}ë¶„`;
        }
        
        // ì¶”ê°€ ë²„íŠ¼ ì„¤ì •
        const acceptBtn = document.getElementById('modal-accept-btn');
        acceptBtn.onclick = function() {
            const modal = bootstrap.Modal.getInstance(document.getElementById('suggestionDetailModal'));
            modal.hide();
            
            // í•´ë‹¹ í•­ëª©ì˜ ì¶”ê°€ ë²„íŠ¼ ì°¾ì•„ì„œ í´ë¦­
            const suggestionRow = document.getElementById(`ai-suggestion-${index}`);
            const addBtn = suggestionRow.querySelector('.btn-success');
            if (addBtn) {
                acceptAISuggestion(addBtn, title, description, duration, relatedType, relatedId);
            }
        };
        
        // ëª¨ë‹¬ í‘œì‹œ
        const modal = new bootstrap.Modal(document.getElementById('suggestionDetailModal'));
        modal.show();
    }
</script>

<!-- AI ì¶”ì²œ ìƒì„¸ ëª¨ë‹¬ -->
<div class="modal fade" id="suggestionDetailModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
            <div class="modal-header" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                <h5 class="modal-title">
                    <i class="fas fa-robot me-2"></i>AI ì¶”ì²œ ìƒì„¸
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <!-- ì¶”ì²œ ì œëª© -->
                <div class="d-flex align-items-center mb-4">
                    <div class="me-3">
                        <span class="fa-stack fa-2x">
                            <i class="fas fa-circle fa-stack-2x" id="modal-icon-bg" style="opacity: 0.2;"></i>
                            <i class="fas fa-stack-1x" id="modal-icon"></i>
                        </span>
                    </div>
                    <div>
                        <h4 class="mb-1" id="modal-title"></h4>
                        <span class="badge" id="modal-urgency-badge"></span>
                        <span class="badge bg-secondary ms-1" id="modal-duration-badge"></span>
                    </div>
                </div>
                
                <!-- ì¶”ì²œ ì´ìœ  -->
                <div class="card bg-light border-0 mb-4">
                    <div class="card-body">
                        <h6 class="card-title text-primary mb-3">
                            <i class="fas fa-lightbulb me-2"></i>ì™œ ì´ TODOë¥¼ ì¶”ì²œí•˜ë‚˜ìš”?
                        </h6>
                        <div id="modal-reason" class="text-dark"></div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ë‹«ê¸°</button>
                <button type="button" class="btn btn-success" id="modal-accept-btn">
                    <i class="fas fa-plus me-1"></i>TODOë¡œ ì¶”ê°€
                </button>
            </div>
        </div>
    </div>
</div>
{% endblock %}